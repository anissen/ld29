/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function p(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function cc(a){return a instanceof Array?function(){return q.iter(a)}:"function"==typeof a.iterator?Ha(a,a.iterator):a.iterator}function Ha(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=sc++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var t=function(){return H.__string_rec(this,"")},U=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};U.__name__=!0;U.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,
len:this.r.m[0].length}},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:U};var q=function(){};q.__name__=!0;q.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};q.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};q.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};q.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<
this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ya=function(){};Ya.__name__=!0;Ya.array=function(a){for(var b=[],a=cc(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Ya.count=function(a,b){var c=0;if(null==b)for(var d=cc(a)();d.hasNext();)d.next(),c++;else for(d=cc(a)();d.hasNext();){var e=d.next();b(e)&&c++}return c};var dc=function(){};dc.__name__=!0;Math.__name__=!0;var Ia=function(){};Ia.__name__=!0;Ia.field=function(a,b){try{return a[b]}catch(c){return null}};var z=
function(){};z.__name__=!0;z.is=function(a,b){return H.__instanceof(a,b)};z.string=function(a){return H.__string_rec(a,"")};z["int"]=function(a){return a|0};z.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==q.cca(a,1)||88==q.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};z.parseFloat=function(a){return parseFloat(a)};var Za=function(){this.b=""};Za.__name__=!0;Za.prototype={add:function(a){this.b+=z.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+q.substr(a,b,null):this.b+q.substr(a,
b,c)},__class__:Za};var P=function(){};P.__name__=!0;P.startsWith=function(a,b){return a.length>=b.length&&q.substr(a,0,b.length)==b};P.replace=function(a,b,c){return a.split(b).join(c)};P.fastCodeAt=function(a,b){return a.charCodeAt(b)};var n=function(){};n.__name__=!0;n.parse=function(a){return ga.parse(a)};n.createElement=function(a){var b=new n;b.nodeType=n.Element;b._children=[];b._attributes=new Q;b.set_nodeName(a);return b};n.createPCData=function(a){var b=new n;b.nodeType=n.PCData;b.set_nodeValue(a);
return b};n.createCData=function(a){var b=new n;b.nodeType=n.CData;b.set_nodeValue(a);return b};n.createComment=function(a){var b=new n;b.nodeType=n.Comment;b.set_nodeValue(a);return b};n.createDocType=function(a){var b=new n;b.nodeType=n.DocType;b.set_nodeValue(a);return b};n.createProcessingInstruction=function(a){var b=new n;b.nodeType=n.ProcessingInstruction;b.set_nodeValue(a);return b};n.createDocument=function(){var a=new n;a.nodeType=n.Document;a._children=[];return a};n.prototype={get_nodeName:function(){if(this.nodeType!=
n.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=n.Element)throw"bad nodeType";return this._nodeName=a},set_nodeValue:function(a){if(this.nodeType==n.Element||this.nodeType==n.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=n.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=n.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=
n.Element)throw"bad nodeType";return this._attributes.exists(a)},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==n.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==n.Element)return this.cur=a,c}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=
this._children.length;a<b;){var c=this._children[a];if(c.nodeType==n.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&q.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:n};var $=function(){};$.__name__=!0;$.prototype={__class__:$};var u=function(){};u.__name__=!0;u.__interfaces__=[$];u.prototype={onAdded:function(){},onRemoved:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},
get_name:function(){return null},init:function(a,b){this.owner=a;this.next=b},__class__:u};var x=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};x.__name__=!0;x.__interfaces__=[$];x.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},
remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:b.init(this,d),delete this._compMap[c.get_name()],c.onRemoved(),c.init(null,null),!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=
null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:x};var ec=function(){};ec.__name__=!0;var Jb=function(){};Jb.__name__=!0;Jb.prototype={__class__:Jb};var ha=function(){};ha.__name__=
!0;ha.__interfaces__=[Jb];ha.prototype={init:function(){var a=this;o.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new ua(b);this._pointer=new I;this._mouse=new $a(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new va;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow=
"hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),f=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(f,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,e);break;case "mouseup":a._mouse.submitUp(f,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,e,"mousewheel"==c.type?
c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var f="undefined"!=typeof window.ontouchstart,e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||e){var i=new ab(this._pointer,f?4:window.navigator.msMaxTouchPoints);
this._touch=i;e=function(b){var c;c=f?b.changedTouches:[b];var e=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();o.SHOULD_HIDE_MOBILE_BROWSER&&o.hideMobileBrowser();for(b=0;b<c.length;){var h=c[b];++b;var k=a.getX(h,e),s=a.getY(h,e);i.submitDown((f?h.identifier:h.pointerId)|0,k,s)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)h=c[b],++b,k=a.getX(h,e),s=
a.getY(h,e),i.submitMove((f?h.identifier:h.pointerId)|0,k,s);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)h=c[b],++b,k=a.getX(h,e),s=a.getY(h,e),i.submitUp((f?h.identifier:h.pointerId)|0,k,s)}};f?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",
e,!1))}else this._touch=new bb;var h=window.onerror;window.onerror=function(a,b,c){m.uncaughtError.emit(a);return null!=h?h(a,b,c):!1};var s=o.loadExtension("hidden",window.document);null!=s.value?(e=function(){m.hidden.set__(Ia.field(window.document,s.field))},e(null),window.document.addEventListener(s.prefix+"visibilitychange",e,!1)):(e=function(a){m.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));m.hidden.get_changed().connect(function(b){b||
(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var g=o.loadExtension("requestAnimationFrame").value;if(null!=g){var k=window.performance,l=null!=k&&o.polyfill("now",k);l?this._lastUpdate=k.now():null;var j=null,j=function(c){a.update(l?k.now():c);g(j,b)};g(j,b)}else window.setInterval(function(){a.update(Date.now())},16);Ja.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new v(this,a)).promise},getStage:function(){return this._stage},
getLocale:function(){var a=window.navigator.language;null==a&&(a=window.navigator.userLanguage);return a},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;m.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*
this._stage.get_height()/b.height},createRenderer:function(a){try{var b=fc.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(o.detectSlowDriver(b))null;else return new cb(this._stage,b)}catch(c){}return new wa(a)},__class__:ha};var E=function(a,b){this._value=a;this._changed=null!=b?new Ka(b):null};E.__name__=!0;E.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,
null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Ka);return this._changed},__class__:E};var xa=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};xa.__name__=!0;xa.__interfaces__=[$];xa.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:xa};var C=function(a){this._head=null!=a?new xa(this,a):
null;this._deferredTasks=null};C.__name__=!0;C.prototype={connectImpl:function(a,b){var c=this,d=new xa(this,a);this._head==C.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new Kb(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;
this._head=C.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:C};var Ka=function(a){C.call(this,a)};Ka.__name__=!0;Ka.__super__=
C;Ka.prototype=p(C.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:Ka});var A=function(a){C.call(this,a)};A.__name__=!0;A.__super__=C;A.prototype=p(C.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,
b)},emit:function(a){var b=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:A});var l=function(a,b){this._behavior=null;E.call(this,a,b)};l.__name__=!0;l.__super__=E;l.prototype=p(E.prototype,{set__:function(a){this._behavior=null;return E.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(E.prototype.set__.call(this,
this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animate:function(a,b,c,d){this.set__(a);this.animateTo(b,c,d)},animateTo:function(a,b,c){this.set_behavior(new ya(this._value,a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:l});var m=function(){};m.__name__=!0;m.init=function(){m._calledInit||(m._platform.init(),m._calledInit=!0)};m.loadAssetPack=function(a){return m._platform.loadAssetPack(a)};var Ja=function(){};Ja.__name__=!0;Ja.info=
function(){null};Ja.__super__=ec;Ja.prototype=p(ec.prototype,{__class__:Ja});var db=function(a){null==a&&(a=1);this._realDt=0;this.scale=new l(a)};db.__name__=!0;db.__super__=u;db.prototype=p(u.prototype,{get_name:function(){return"SpeedAdjuster_2"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:db});var eb=function(){};eb.__name__=!0;eb.prototype={__class__:eb};var y=function(){};y.__name__=!0;y.linear=function(a){return a};y.quadOut=function(a){return a*
(2-a)};y.bounceOut=function(a){return 0.36363636363636365>a?7.5625*a*a:0.7272727272727273>a?7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75:0.9090909090909091>a?7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375:7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375};y.backOut=function(a){return 1- --a*a*(-2.70158*a-1.70158)};y.elasticOut=function(a){return 1*Math.pow(2,-10*a)*Math.sin(6.283185307179586*(a-0.06366197723675814*Math.asin(1))/0.4)+1};var La=function(a,b){this.base=
a;this.strength=b};La.__name__=!0;La.__interfaces__=[eb];La.prototype={update:function(){return this.base+2*Math.random()*this.strength-this.strength},isComplete:function(){return!1},__class__:La};var ya=function(a,b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:y.linear};ya.__name__=!0;ya.__interfaces__=[eb];ya.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/
this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:ya};var na=function(){};na.__name__=!0;na.__interfaces__=[$];na.prototype={__class__:na};var g={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};g.WEBP.toString=t;g.WEBP.__enum__=g;g.JXR=["JXR",1];g.JXR.toString=t;g.JXR.__enum__=g;g.PNG=["PNG",2];g.PNG.toString=t;g.PNG.__enum__=g;g.JPG=["JPG",3];g.JPG.toString=t;g.JPG.__enum__=g;g.GIF=["GIF",4];
g.GIF.toString=t;g.GIF.__enum__=g;g.DDS=["DDS",5];g.DDS.toString=t;g.DDS.__enum__=g;g.PVR=["PVR",6];g.PVR.toString=t;g.PVR.__enum__=g;g.PKM=["PKM",7];g.PKM.toString=t;g.PKM.__enum__=g;g.MP3=["MP3",8];g.MP3.toString=t;g.MP3.__enum__=g;g.M4A=["M4A",9];g.M4A.toString=t;g.M4A.__enum__=g;g.OPUS=["OPUS",10];g.OPUS.toString=t;g.OPUS.__enum__=g;g.OGG=["OGG",11];g.OGG.toString=t;g.OGG.__enum__=g;g.WAV=["WAV",12];g.WAV.toString=t;g.WAV.__enum__=g;g.Data=["Data",13];g.Data.toString=t;g.Data.__enum__=g;var Lb=
function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};Lb.__name__=!0;Lb.prototype={__class__:Lb};var fb=function(){};fb.__name__=!0;fb.__interfaces__=[$];fb.prototype={__class__:fb};var gb=function(){};gb.__name__=!0;gb.__interfaces__=[na];gb.prototype={__class__:gb};var F=function(){this._localBase=this._remoteBase=null;this._entries=[]};F.__name__=!0;F.fromAssets=function(a,b){null==b&&(b=!0);var c=Ia.field(gc.getType(F).assets[0],a);if(null==c){if(b)throw D.withFields("Missing asset pack",
["name",a]);return null}var d=new F;d.set_localBase("assets");for(var e=0;e<c.length;){var f=c[e];++e;var i=f.name,h=a+"/"+i+"?v="+z.string(f.md5),s=F.inferFormat(i);s!=g.Data&&(i=D.removeFileExtension(i));d.add(i,h,f.bytes,s)}return d};F.fromAssetsLocalized=function(a,b,c){null==c&&(c=!0);null==b&&(b=m._platform.getLocale());if(null!=b)for(b=b.split("-");0<b.length;){var d=F.fromAssets(a+"_"+b.join("-"),!1);if(null!=d)return d;b.pop()}return F.fromAssets(a,c)};F.inferFormat=function(a){a=D.getUrlExtension(a);
if(null!=a)switch(a.toLowerCase()){case "gif":return g.GIF;case "jpg":case "jpeg":return g.JPG;case "jxr":case "wdp":return g.JXR;case "png":return g.PNG;case "webp":return g.WEBP;case "dds":return g.DDS;case "pvr":return g.PVR;case "pkm":return g.PKM;case "m4a":return g.M4A;case "mp3":return g.MP3;case "ogg":return g.OGG;case "opus":return g.OPUS;case "wav":return g.WAV}else null;return g.Data};F.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=F.inferFormat(b));a=new Lb(a,b,d,c);this._entries.push(a);
return a},iterator:function(){return q.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&F._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?D.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&hc.that(!P.startsWith(a,"http://")&&!P.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},
__class__:F};var J={__ename__:!0,__constructs__:["Normal","Add","Mask","Copy"],Normal:["Normal",0]};J.Normal.toString=t;J.Normal.__enum__=J;J.Add=["Add",1];J.Add.toString=t;J.Add.__enum__=J;J.Mask=["Mask",2];J.Mask.toString=t;J.Mask.__enum__=J;J.Copy=["Copy",3];J.Copy.toString=t;J.Copy.__enum__=J;var aa={__ename__:!0,__constructs__:["Gravity","Radial"],Gravity:["Gravity",0]};aa.Gravity.toString=t;aa.Gravity.__enum__=aa;aa.Radial=["Radial",1];aa.Radial.toString=t;aa.Radial.__enum__=aa;var r=function(a,
b){for(var c=0,d=0,e=n.parse(a.getFile(b+".pex").toString()).firstElement().elements();e.hasNext();){var f=e.next();switch(f.get_nodeName().toLowerCase()){case "texture":this.texture=a.getTexture(D.removeFileExtension(f.get("name")));break;case "angle":this.angle=r.getFloat(f,"value");break;case "anglevariance":this.angleVariance=r.getFloat(f,"value");break;case "blendfuncdestination":d=z["int"](r.getFloat(f,"value"));break;case "blendfuncsource":c=z["int"](r.getFloat(f,"value"));break;case "duration":this.duration=
r.getFloat(f,"value");break;case "emittertype":this.type=0==z["int"](r.getFloat(f,"value"))?aa.Gravity:aa.Radial;break;case "finishcolor":this.alphaEnd=r.getFloat(f,"alpha");break;case "finishcolorvariance":this.alphaEndVariance=r.getFloat(f,"alpha");break;case "finishparticlesize":this.sizeEnd=r.getFloat(f,"value");break;case "finishparticlesizevariance":this.sizeEndVariance=r.getFloat(f,"value");break;case "gravity":this.gravityX=r.getFloat(f,"x");this.gravityY=r.getFloat(f,"y");break;case "maxparticles":this.maxParticles=
z["int"](r.getFloat(f,"value"));break;case "maxradius":this.maxRadius=r.getFloat(f,"value");break;case "maxradiusvariance":this.maxRadiusVariance=r.getFloat(f,"value");break;case "minradius":this.minRadius=r.getFloat(f,"value");break;case "particlelifespan":this.lifespan=r.getFloat(f,"value");break;case "particlelifespanvariance":this.lifespanVariance=r.getFloat(f,"value");break;case "radialaccelvariance":this.radialAccelVariance=r.getFloat(f,"value");break;case "radialacceleration":this.radialAccel=
r.getFloat(f,"value");break;case "rotatepersecond":this.rotatePerSecond=r.getFloat(f,"value");break;case "rotatepersecondvariance":this.rotatePerSecondVariance=r.getFloat(f,"value");break;case "rotationend":this.rotationEnd=r.getFloat(f,"value");break;case "rotationendvariance":this.rotationEndVariance=r.getFloat(f,"value");break;case "rotationstart":this.rotationStart=r.getFloat(f,"value");break;case "rotationstartvariance":this.rotationStartVariance=r.getFloat(f,"value");break;case "sourcepositionvariance":this.emitXVariance=
r.getFloat(f,"x");this.emitYVariance=r.getFloat(f,"y");break;case "speed":this.speed=r.getFloat(f,"value");break;case "speedvariance":this.speedVariance=r.getFloat(f,"value");break;case "startcolor":this.alphaStart=r.getFloat(f,"alpha");break;case "startcolorvariance":this.alphaStartVariance=r.getFloat(f,"alpha");break;case "startparticlesize":this.sizeStart=r.getFloat(f,"value");break;case "startparticlesizevariance":this.sizeStartVariance=r.getFloat(f,"value");break;case "tangentialaccelvariance":this.tangentialAccelVariance=
r.getFloat(f,"value");break;case "tangentialacceleration":this.tangentialAccel=r.getFloat(f,"value")}}0>=this.lifespan&&(this.lifespan=this.duration);1==c&&1==d?this.blendMode=J.Add:1==c&&771==d?this.blendMode=null:(0!=c||0!=d)&&null};r.__name__=!0;r.getFloat=function(a,b){return z.parseFloat(a.get(b))};r.prototype={createEmitter:function(){return new B(this)},__class__:r};var hb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};hb.__name__=!0;hb.prototype={__class__:hb};var j=function(){this.blendMode=
this.scissor=null;var a=this;this._flags=139;this._localMatrix=new X;var b=function(){a._flags|=12};this.x=new l(0,b);this.y=new l(0,b);this.rotation=new l(0,b);this.scaleX=new l(1,b);this.scaleY=new l(1,b);this.anchorX=new l(0,b);this.anchorY=new l(0,b);this.alpha=new l(1)};j.__name__=!0;j.hitTest=function(a,b,c){var d=a._compMap.Sprite_0;if(null!=d){if(3!=(d._flags&3))return null;d.getLocalMatrix().inverseTransform(b,c,j._scratchPoint)&&(b=j._scratchPoint.x,c=j._scratchPoint.y);var e=d.scissor;
if(null!=e&&!e.contains(b,c))return null}a=j.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};j.getBounds=function(a,b){null==b&&(b=new za);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);j.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};j.render=function(a,b){var c=a._compMap.Sprite_0;if(null!=c){var d=c.alpha._value;if(0==(c._flags&1)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&
b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=d.m02,f=d.m12;0!=(c._flags&128)&&(e=Math.round(e),f=Math.round(f));b.transform(d.m00,d.m10,d.m01,d.m11,e,f);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_1;if(null!=d){d=d.occludedScenes;for(e=0;e<d.length;)f=d[e],++e,j.render(f,b)}for(d=a.firstChild;null!=d;)e=d.next,j.render(d,b),d=e;null!=c&&b.restore()};j.hitTestBackwards=function(a,b,c){if(null!=a){var d=j.hitTestBackwards(a.next,b,c);return null!=
d?d:j.hitTest(a,b,c)}return null};j.getBoundsImpl=function(a,b,c){var d=a._compMap.Sprite_0;if(null!=d){var b=null!=b?X.multiply(b,d.getLocalMatrix()):d.getLocalMatrix(),e=d.getNaturalWidth(),d=d.getNaturalHeight();0<e&&0<d&&(j.extendRect(b,0,0,c),j.extendRect(b,e,0,c),j.extendRect(b,e,d,c),j.extendRect(b,0,d,c))}e=a._compMap.Director_1;if(null!=e)for(var e=e.occludedScenes,d=0,f=e.length;d<f;)j.getBoundsImpl(e[d],b,c),++d;for(a=a.firstChild;null!=a;)e=a.next,j.getBoundsImpl(a,b,c),a=e};j.extendRect=
function(a,b,c,d){a=a.transform(b,c,j._scratchPoint);b=a.x;c=a.y;b<d.x&&(d.x=b);c<d.y&&(d.y=c);b>d.width&&(d.width=b);c>d.height&&(d.height=c)};j.__super__=u;j.prototype=p(u.prototype,{get_name:function(){return"Sprite_0"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,
this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);
return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},disablePixelSnapping:function(){this.set_pixelSnapping(!1);return this},onAdded:function(){0!=(this._flags&256)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},
draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_0;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new A);return this._pointerDown},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new A);return this._pointerUp},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=m._platform.getPointer().move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&256)&&a._pointerOut.emit(b);a._flags&=-257;a._hoverConnection.dispose();a._hoverConnection=null}))},set_pointerEnabled:function(a){this._flags=Mb.set(this._flags,2,a);return a},set_pixelSnapping:function(a){this._flags=Mb.set(this._flags,128,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&
this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&256)&&(this._flags|=256,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&256)&&this._pointerOut.emit(a),this._flags&=-257,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:j});var B=
function(a){this._emitElapsed=this._totalElapsed=0;this.enabled=!0;this.numParticles=0;j.call(this);this.texture=a.texture;this.blendMode=a.blendMode;this.type=a.type;this.alphaEnd=new l(a.alphaEnd);this.alphaEndVariance=new l(a.alphaEndVariance);this.alphaStart=new l(a.alphaStart);this.alphaStartVariance=new l(a.alphaStartVariance);this.angle=new l(a.angle);this.angleVariance=new l(a.angleVariance);this.duration=a.duration;this.emitXVariance=new l(a.emitXVariance);this.emitYVariance=new l(a.emitYVariance);
this.gravityX=new l(a.gravityX);this.gravityY=new l(a.gravityY);this.maxRadius=new l(a.maxRadius);this.maxRadiusVariance=new l(a.maxRadiusVariance);this.minRadius=new l(a.minRadius);this.lifespan=new l(a.lifespan);this.lifespanVariance=new l(a.lifespanVariance);this.radialAccel=new l(a.radialAccel);this.radialAccelVariance=new l(a.radialAccelVariance);this.rotatePerSecond=new l(a.rotatePerSecond);this.rotatePerSecondVariance=new l(a.rotatePerSecondVariance);this.rotationEnd=new l(a.rotationEnd);this.rotationEndVariance=
new l(a.rotationEndVariance);this.rotationStart=new l(a.rotationStart);this.rotationStartVariance=new l(a.rotationStartVariance);this.sizeEnd=new l(a.sizeEnd);this.sizeEndVariance=new l(a.sizeEndVariance);this.sizeStart=new l(a.sizeStart);this.sizeStartVariance=new l(a.sizeStartVariance);this.speed=new l(a.speed);this.speedVariance=new l(a.speedVariance);this.tangentialAccel=new l(a.tangentialAccel);this.tangentialAccelVariance=new l(a.tangentialAccelVariance);this.emitX=new l(0);this.emitY=new l(0);
this._particles=Array(a.maxParticles);for(var a=0,b=this._particles.length;a<b;)this._particles[a]=new Nb,++a};B.__name__=!0;B.random=function(a,b){0!=b&&(a+=b*(2*Math.random()-1));return a};B.__super__=j;B.prototype=p(j.prototype,{restart:function(){this.enabled=!0;this._totalElapsed=0},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.alphaEnd.update(a);this.alphaEndVariance.update(a);this.alphaStart.update(a);this.alphaStartVariance.update(a);this.angle.update(a);this.angleVariance.update(a);
this.emitX.update(a);this.emitXVariance.update(a);this.emitY.update(a);this.emitYVariance.update(a);this.gravityX.update(a);this.gravityY.update(a);this.lifespan.update(a);this.lifespanVariance.update(a);this.maxRadius.update(a);this.maxRadiusVariance.update(a);this.minRadius.update(a);this.radialAccel.update(a);this.radialAccelVariance.update(a);this.rotatePerSecond.update(a);this.rotatePerSecondVariance.update(a);this.rotationEnd.update(a);this.rotationEndVariance.update(a);this.rotationStart.update(a);
this.rotationStartVariance.update(a);this.sizeEnd.update(a);this.sizeEndVariance.update(a);this.sizeStart.update(a);this.sizeStartVariance.update(a);this.speed.update(a);this.speedVariance.update(a);this.tangentialAccel.update(a);this.tangentialAccelVariance.update(a);for(var b=this.type==aa.Gravity,c=0;c<this.numParticles;){var d=this._particles[c];if(d.life>a){if(b){d.x+=d.velX*a;d.y+=d.velY*a;var e=this.gravityX._value,f=-this.gravityY._value;if(0!=d.radialAccel||0!=d.tangentialAccel)var i=d.x-
d.emitX,h=d.y-d.emitY,s=Math.sqrt(i*i+h*h),i=i/s,h=h/s,e=e+i*d.radialAccel,f=f+h*d.radialAccel,s=i,e=e+-h*d.tangentialAccel,f=f+s*d.tangentialAccel;d.velX+=e*a;d.velY+=f*a}else d.radialRotation+=d.velRadialRotation*a,d.radialRadius+=d.velRadialRadius*a,e=d.radialRadius,d.x=this.emitX._value-Math.cos(d.radialRotation)*e,d.y=this.emitY._value-Math.sin(d.radialRotation)*e,e<this.minRadius._value&&(d.life=0);d.scale+=d.velScale*a;d.rotation+=d.velRotation*a;d.alpha+=d.velAlpha*a;d.life-=a;++c}else--this.numParticles,
c!=this.numParticles&&(this._particles[c]=this._particles[this.numParticles],this._particles[this.numParticles]=d)}if(this.enabled){if(0<this.duration&&(this._totalElapsed+=a,this._totalElapsed>=this.duration)){this.enabled=!1;return}b=this.lifespan._value/this._particles.length;for(this._emitElapsed+=a;this._emitElapsed>=b;)this.numParticles<this._particles.length&&this.initParticle(this._particles[this.numParticles])&&++this.numParticles,this._emitElapsed-=b}},draw:function(a){for(var b=-this.texture.get_width()/
2,c=0,d=this.numParticles;c<d;){var e=this._particles[c];a.save();a.translate(e.x,e.y);1>e.alpha&&a.multiplyAlpha(e.alpha);0!=e.rotation&&a.rotate(e.rotation);1!=e.scale&&a.scale(e.scale,e.scale);a.drawTexture(this.texture,b,b);a.restore();++c}},initParticle:function(a){a.life=B.random(this.lifespan._value,this.lifespanVariance._value);if(0>=a.life)return!1;a.emitX=this.emitX._value;a.emitY=this.emitY._value;var b=-L.toRadians(B.random(this.angle._value,this.angleVariance._value)),c=B.random(this.speed._value,
this.speedVariance._value);a.velX=c*Math.cos(b);a.velY=c*Math.sin(b);a.radialAccel=B.random(this.radialAccel._value,this.radialAccelVariance._value);a.tangentialAccel=B.random(this.tangentialAccel._value,this.tangentialAccelVariance._value);a.radialRadius=B.random(this.maxRadius._value,this.maxRadiusVariance._value);a.velRadialRadius=-a.radialRadius/a.life;a.radialRotation=b;a.velRadialRotation=L.toRadians(B.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value));this.type==aa.Gravity?
(a.x=B.random(this.emitX._value,this.emitXVariance._value),a.y=B.random(this.emitY._value,this.emitYVariance._value)):(b=a.radialRadius,a.x=this.emitX._value-Math.cos(a.radialRotation)*b,a.y=this.emitY._value-Math.sin(a.radialRotation)*b);c=this.texture.get_width();b=B.random(this.sizeStart._value,this.sizeStartVariance._value)/c;c=B.random(this.sizeEnd._value,this.sizeEndVariance._value)/c;a.scale=b;a.velScale=(c-b)/a.life;b=B.random(this.rotationStart._value,this.rotationStartVariance._value);c=
B.random(this.rotationEnd._value,this.rotationEndVariance._value);a.rotation=b;a.velRotation=(c-b)/a.life;b=B.random(this.alphaStart._value,this.alphaStartVariance._value);c=B.random(this.alphaEnd._value,this.alphaEndVariance._value);a.alpha=b;a.velAlpha=(c-b)/a.life;return!0},__class__:B});var Nb=function(){this.emitX=this.emitY=this.x=this.velX=this.y=this.velY=this.radialRadius=this.velRadialRadius=this.radialRotation=this.velRadialRotation=this.radialAccel=this.tangentialAccel=this.scale=this.velScale=
this.rotation=this.velRotation=this.alpha=this.velAlpha=this.life=0};Nb.__name__=!0;Nb.prototype={__class__:Nb};var Aa=function(a,b,c){j.call(this);this.color=a;this.width=new l(b);this.height=new l(c)};Aa.__name__=!0;Aa.__super__=j;Aa.prototype=p(j.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){j.prototype.onUpdate.call(this,
a);this.width.update(a);this.height.update(a)},__class__:Aa});var ib=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};ib.__name__=!0;ib.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?z["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&
(this._kernings=new da);this._kernings.set(a,b)},__class__:ib};var Ba=function(a,b){this.name=b;this._pack=a;this.reload()};Ba.__name__=!0;Ba.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=M.Left);return new oa(this,a,b,c,d,e)},reload:function(){this._glyphs=new da;this._glyphs.set(Ba.NEWLINE.charCode,Ba.NEWLINE);for(var a=new Ca(this._pack.getFile(this.name+".fnt").toString()),b=new da,c=this.name.lastIndexOf("/"),c=0<=c?q.substr(this.name,0,c+
1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var f=e.next();switch(f.key){case "size":this.size=f.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(f=e.next(),f.key){case "lineHeight":this.lineHeight=f.getInt()}break;case "page":for(var e=0,f=null,i=a.pairs();i.hasNext();){var h=i.next();switch(h.key){case "id":e=h.getInt();break;case "file":f=h.getString()}}f=this._pack.getTexture(c+D.removeFileExtension(f));b.set(e,f);break;case "char":e=
null;for(f=a.pairs();f.hasNext();)switch(i=f.next(),i.key){case "id":e=new ib(i.getInt());break;case "x":e.x=i.getInt();break;case "y":e.y=i.getInt();break;case "width":e.width=i.getInt();break;case "height":e.height=i.getInt();break;case "page":i=i.getInt();e.page=b.get(i);break;case "xoffset":e.xOffset=i.getInt();break;case "yoffset":e.yOffset=i.getInt();break;case "xadvance":e.xAdvance=i.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;i=f=0;for(h=a.pairs();h.hasNext();){var s=
h.next();switch(s.key){case "first":e=this._glyphs.get(s.getInt());break;case "second":f=s.getInt();break;case "amount":i=s.getInt()}}null!=e&&0!=i&&e.setKerning(f,i)}},__class__:Ba};var M={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};M.Left.toString=t;M.Left.__enum__=M;M.Center=["Center",1];M.Center.toString=t;M.Center.__enum__=M;M.Right=["Right",2];M.Right.toString=t;M.Right.__enum__=M;var oa=function(a,b,c,d,e,f){this.lines=0;var i=this;this._font=a;this._glyphs=[];this._offsets=
[];this._lineOffset=Math.round(a.lineHeight+f);this.bounds=new za;for(var h=[],f=b.length,s=0;s<f;){var g=s++,g=b.charCodeAt(g),g=a._glyphs.get(g);null!=g?this._glyphs.push(g):null}for(var b=-1,k=0,l=0,a=a._glyphs.get(10),f=function(){i.bounds.width=L.max(i.bounds.width,k);i.bounds.height+=l;h[i.lines]=k;l=k=0;++i.lines},s=0;s<this._glyphs.length;){g=this._glyphs[s];this._offsets[s]=Math.round(k);var j=0<d&&k+g.width>d;j||g==a?(j&&(0<=b?(this._glyphs[b]=a,k=this._offsets[b],s=b):this._glyphs.splice(s,
0,a)),b=-1,l=this._lineOffset,f()):(32==g.charCode&&(b=s),k+=g.xAdvance+e,l=L.max(l,g.height+g.yOffset),s+1<this._glyphs.length&&(k+=g.getKerning(this._glyphs[s+1].charCode)));++s}f();e=0;a=oa.getAlignOffset(c,h[0],d);b=1.79769313486231E308;f=-1.79769313486231E308;g=s=0;for(j=this._glyphs.length;g<j;){var m=this._glyphs[g];10==m.charCode&&(e+=this._lineOffset,++s,a=oa.getAlignOffset(c,h[s],d));this._offsets[g]+=a;var n=e+m.yOffset;b<n||(b=n);f=L.max(f,n+m.height);++g}this.bounds.x=oa.getAlignOffset(c,
this.bounds.width,d);this.bounds.y=b;this.bounds.height=f-b};oa.__name__=!0;oa.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};oa.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[c],b);++c}},__class__:oa};var Ca=function(a){this._configText=a;this._keywordPattern=new U("([A-Za-z]+)(.*)","");this._pairPattern=new U('([A-Za-z]+)=("[^"]*"|[^\\s]+)',
"")};Ca.__name__=!0;Ca.advance=function(a,b){var c=b.matchedPos();return q.substr(a,c.pos+c.len,a.length)};Ca.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=Ca.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Ca.advance(b,a._pairPattern);return new Ob(a._pairPattern.matched(1),
a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Ca};var Ob=function(a,b){this.key=a;this._value=b};Ob.__name__=!0;Ob.prototype={getInt:function(){return z.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:q.substr(this._value,1,this._value.length-2)},__class__:Ob};var Pb=function(){};Pb.__name__=!0;Pb.prototype={__class__:Pb};var R=function(a){j.call(this);this.texture=a};R.__name__=!0;R.__super__=j;R.prototype=p(j.prototype,
{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:R});var ia={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};ia.Portrait.toString=t;ia.Portrait.__enum__=ia;ia.Landscape=["Landscape",1];ia.Landscape.toString=t;ia.Landscape.__enum__=ia;var Da=function(a,b,c){null==c&&(c=-1);null==
b&&(b=-1);j.call(this);this.texture=a;0>b&&(b=null!=a?a.get_width():0);this.width=new l(b);0>c&&(c=null!=a?a.get_height():0);this.height=new l(c)};Da.__name__=!0;Da.__super__=j;Da.prototype=p(j.prototype,{draw:function(a){null!=this.texture&&a.drawPattern(this.texture,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},
__class__:Da});var jb=function(){};jb.__name__=!0;jb.__interfaces__=[na];jb.prototype={__class__:jb};var ic=function(){};ic.__name__=!0;ic.__interfaces__=[jb];var Ea=function(a,b){null==b&&(b="");this._layout=null;var c=this;j.call(this);this._font=a;this._text=b;this._align=M.Left;this._flags|=64;var d=function(){c._flags|=64};this.wrapWidth=new l(0,d);this.letterSpacing=new l(0,d);this.lineSpacing=new l(0,d)};Ea.__name__=!0;Ea.__super__=j;Ea.prototype=p(j.prototype,{draw:function(a){this.updateLayout();
this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},setWrapWidth:function(a){this.wrapWidth.set__(a);return this},setAlign:function(a){this.set_align(a);
return this},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=64);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=64);return a},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},
__class__:Ea});var K={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};K.Left.toString=t;K.Left.__enum__=K;K.Middle=["Middle",1];K.Middle.toString=t;K.Middle.__enum__=K;K.Right=["Right",2];K.Right.toString=t;K.Right.__enum__=K;K.Unknown=function(a){a=["Unknown",3,a];a.__enum__=K;a.toString=t;return a};var Y={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};Y.Default.toString=t;Y.Default.__enum__=Y;Y.Button=["Button",1];Y.Button.toString=
t;Y.Button.__enum__=Y;Y.None=["None",2];Y.None.toString=t;Y.None.__enum__=Y;var Qb=function(){this.init(0,0,0,null)};Qb.__name__=!0;Qb.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Qb};var Ma={__ename__:!0,__constructs__:["Mouse","Touch"]};Ma.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Ma;a.toString=t;return a};Ma.Touch=function(a){a=["Touch",1,a];a.__enum__=Ma;a.toString=t;return a};var Rb=function(){this.init(0,0,0,null,null)};Rb.__name__=!0;Rb.prototype=
{init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:Rb};var Sb=function(a){this.id=a;this._source=Ma.Touch(this)};Sb.__name__=!0;Sb.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Sb};var L=function(){};L.__name__=!0;L.toRadians=function(a){return 3.141592653589793*a/180};L.max=function(a,b){return a>b?a:b};L.min=function(a,b){return a<b?a:b};var X=function(){this.identity()};X.__name__=!0;X.multiply=function(a,b,c){null==
c&&(c=new X);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=f;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=f;return c};X.prototype={set:function(a,b,c,d,e,f){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*c,f*c,-f*d,e*d,a,b)},translate:function(a,
b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,c){null==c&&(c=new hb);c.x=a*this.m00+b*this.m01+this.m02;c.y=a*this.m10+b*this.m11+this.m12;return c},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],f=a[d+1];c[d++]=e*this.m00+f*this.m01+this.m02;
c[d++]=e*this.m10+f*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new X);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:X};var za=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};
za.__name__=!0;za.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new za);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},
__class__:za};var G=function(){this._disposed=!1};G.__name__=!0;G.__interfaces__=[na];G.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:G};var pa=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new kb;this._bytesLoaded=new Q;this._pack=new lb(b,this);var d=Ya.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new Q,f=0;f<d.length;){var i=d[f];++f;var h=e.get(i.name);null==h&&(h=[],e.set(i.name,
h));h.push(i)}this._assetsRemaining=Ya.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(f){c.handleError(d,"Unexpected error: "+z.string(f))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],pa.isAudio(d.format)?c.handleLoad(d,V.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};pa.__name__=!0;pa.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;
default:return!1}};pa.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=0;f<a.length;){var i=a[f];++f;if(i.format==e){b(i);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=
this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(D.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,
"Failed to create texture. Is the GPU context unavailable?")},__class__:pa};var lb=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new Q;this.sounds=new Q;this.files=new Q};lb.__name__=!0;lb.__interfaces__=[fb];lb.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw D.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw D.withFields("Missing sound",
["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw D.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:lb};var Na=function(a){this._disposed=
!1;this._content=a};Na.__name__=!0;Na.__interfaces__=[gb];Na.__super__=G;Na.prototype=p(G.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Na});var pc=function(){};pc.__name__=!0;var S=function(a){this._pointer=a;this._source=Ma.Mouse(S._sharedEvent);this.down=new A;this.move=new A;this.up=new A;this.scroll=new A;this._y=this._x=0;this._cursor=Y.Default;this._buttonStates=new da};S.__name__=!0;S.__interfaces__=[pc];S.prototype={submitDown:function(a,
b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Tb.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(S._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(S._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,Tb.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(S._sharedEvent))},submitScroll:function(a,
b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;S._sharedEvent.init(S._sharedEvent.id+1,a,b,c)},__class__:S};var Ub=function(){};Ub.__name__=!0;Ub.prototype={__class__:Ub};var I=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new A;this.move=new A;this.up=new A;this._x=a;this._y=b;this._isDown=c};I.__name__=!0;I.__interfaces__=[Ub];I.prototype={submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,
b,c);this._isDown=!0;var d=[],e=j.hitTest(m.root,a,b);if(null!=e){var f=e.owner;do{var i=f._compMap.Sprite_0;null!=i&&d.push(i);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(I._sharedEvent),I._sharedEvent._stopped)return;this.down.emit(I._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=j.hitTest(m.root,a,b);if(null!=e){var f=e.owner;do{var i=f._compMap.Sprite_0;null!=i&&d.push(i);f=f.parent}while(null!=f)}this.prepare(a,
b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(I._sharedEvent),I._sharedEvent._stopped)return;this.move.emit(I._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=j.hitTest(m.root,a,b);if(null!=e){var f=e.owner;do{var i=f._compMap.Sprite_0;null!=i&&d.push(i);f=f.parent}while(null!=f)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(I._sharedEvent),I._sharedEvent._stopped)return;this.up.emit(I._sharedEvent)}},prepare:function(a,
b,c,d){this._x=a;this._y=b;I._sharedEvent.init(I._sharedEvent.id+1,a,b,c,d)},__class__:I};var ba=function(a,b,c){this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};ba.__name__=!0;ba.__interfaces__=[ic];ba.__super__=G;ba.prototype=p(G.prototype,{onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:ba});var jc=function(){};jc.__name__=!0;var ab=function(a,
b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new da;this._points=[];this.down=new A;this.move=new A;this.up=new A};ab.__name__=!0;ab.__interfaces__=[jc];ab.prototype={submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Sb(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),
this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),q.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:ab};var Fa=function(){};Fa.__name__=!0;Fa.__interfaces__=[na];Fa.prototype={__class__:Fa};var V=function(){this._disposed=!1;this._playback=new mb(this)};V.__name__=!0;V.__interfaces__=
[Fa];V.getInstance=function(){null==V._instance&&(V._instance=new V);return V._instance};V.__super__=G;V.prototype=p(G.prototype,{loop:function(){return this._playback},onDisposed:function(){},__class__:V});var nb=function(){};nb.__name__=!0;nb.__interfaces__=[$];var mb=function(a){this._sound=a;this.volume=new l(0);this._complete=new E(!0)};mb.__name__=!0;mb.__interfaces__=[nb];mb.prototype={dispose:function(){},__class__:mb};var bb=function(){this.down=new A;this.move=new A;this.up=new A};bb.__name__=
!0;bb.__interfaces__=[jc];bb.prototype={__class__:bb};var Oa=function(){this._entries=[]};Oa.__name__=!0;Oa.__interfaces__=[$];Oa.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Vb(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Oa};var Vb=
function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};Vb.__name__=!0;Vb.prototype={__class__:Vb};var Pa=function(){};Pa.__name__=!0;Pa.__interfaces__=[Pb];Pa.prototype={__class__:Pa};var Wb=function(){};Wb.__name__=!0;Wb.prototype={__class__:Wb};var Qa=function(){};Qa.__name__=!0;Qa.__interfaces__=[Wb];Qa.prototype={__class__:Qa};var va=function(){this._tickables=[]};va.__name__=!0;va.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_2;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=
b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,va.updateEntity(c,b),c=d};va.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}m.volume.update(a);va.updateEntity(m.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),j.render(m.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},
__class__:va};var Xb=function(){};Xb.__name__=!0;Xb.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var Tb=function(){};Tb.__name__=!0;Tb.toButton=function(a){switch(a){case 0:return K.Left;case 1:return K.Middle;case 2:return K.Right}return K.Unknown(a)};var kc=function(){};kc.__name__=!0;var ob=function(){};ob.__name__=!0;ob.prototype={__class__:ob};var pb=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};pb.__name__=!0;pb.__interfaces__=[Pa];pb.prototype=
{save:function(){this._canvasCtx.save()},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,c,d,e,f){this._canvasCtx.transform(a,b,c,d,e,f)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,i){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation=
"copy",this.drawSubTexture(a,b,c,d,e,f,i),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+e|0,f|0,i|0,b|0,c|0,f|0,i|0)},drawPattern:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=
!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+z.string(a);this._canvasCtx.fillStyle="#"+z.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b="copy"}this._canvasCtx.globalCompositeOperation=
b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:pb};var wa=function(a){this.graphics=new pb(a,!1);this._hasGPU=new E(!0)};wa.__name__=!0;wa.__interfaces__=[Qa];wa.prototype={get_type:function(){return W.Canvas},createTextureFromImage:function(a){a=new Ra(wa.CANVAS_TEXTURES?o.createCanvas(a):a);return a.createTexture(a.width,a.height)},
getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:wa};var qb=function(a,b,c){this._rootUpdateCount=0;this._pattern=null;ba.call(this,a,b,c)};qb.__name__=!0;qb.__super__=ba;qb.prototype=p(ba.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=
this.root.createPattern(this.rootX,this.rootY,this._width,this._height);return this._pattern},__class__:qb});var Ra=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};Ra.__name__=!0;Ra.__interfaces__=[kc];Ra.__super__=G;Ra.prototype=p(G.prototype,{createTexture:function(a,b){return new qb(this,a,b)},createPattern:function(a,b,c,d){var e=this.getContext2d(),f=this.image;if(0!=a||0!=b||c!=this.width||d!=this.height)f=o.createEmptyCanvas(c,
d),c=f.getContext("2d"),c.globalCompositeOperation="copy",c.drawImage(this.image,-a,-b);return e.createPattern(f,"repeat")},getContext2d:function(){H.__instanceof(this.image,HTMLCanvasElement)||(this.image=o.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Ra});var v=function(a,b){pa.call(this,a,b)};v.__name__=!0;v.detectImageFormats=function(a){var b=[g.PNG,g.JPG,g.GIF],c=2,d;d=window.document.createElement("img");d.onload=
d.onerror=function(){1==d.width&&b.unshift(g.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(g.JXR);--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};v.detectAudioFormats=function(){var a;
a=window.document.createElement("audio");if(null==a||null==Ha(a,a.canPlayType))return[];var b=new U("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!w.get_supported()&&b.match(c))return[];for(var b=[{format:g.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:g.MP3,mimeType:"audio/mpeg"},{format:g.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:g.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:g.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var f=
"";try{f=a.canPlayType(e.mimeType)}catch(i){}""!=f&&c.push(e.format)}return c};v.supportsBlob=function(){if(v._detectBlobSupport){v._detectBlobSupport=!1;if((new U("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;v._URL=o.loadExtension("URL").value}return null!=v._URL&&null!=v._URL.createObjectURL};v.__super__=pa;v.prototype=p(pa.prototype,
{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var e=new Oa;e.addDisposingListener(d,"load",function(){v.supportsBlob()&&v._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});v.supportsBlob()?this.download(a,b,"blob",function(a){d.src=v._URL.createObjectURL(a)}):
d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(w.get_supported())this.download(a,b,"arraybuffer",function(a){w.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new w(a))},function(){c.handleLoad(b,V.getInstance())})});else{var f;f=window.document.createElement("audio");f.preload="auto";var i=++v._mediaRefCount;
null==v._mediaElements&&(v._mediaElements=new da);v._mediaElements.set(i,f);e=new Oa;e.addDisposingListener(f,"canplaythrough",function(){v._mediaElements.remove(i);c.handleLoad(b,new Sa(f))});e.addDisposingListener(f,"error",function(){v._mediaElements.remove(i);var a=f.error.code;3==a||4==a?c.handleLoad(b,V.getInstance()):c.handleError(b,"Failed to load audio: "+f.error.code)});e.addListener(f,"progress",function(){if(0<f.buffered.length&&0<f.duration){var a=f.buffered.end(0)/f.duration;c.handleProgress(b,
a*b.bytes|0)}});f.src=a;f.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Na(a))})}},getAssetFormats:function(a){var b=this;null==v._supportedFormats&&(v._supportedFormats=new kb,v.detectImageFormats(function(a){v._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(v.detectAudioFormats()).concat([g.Data]))}));v._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,f=null,i=null,h=0,g=!1,l=function(){g&&(g=!1,
window.clearInterval(h))},k=3,j=function(){--k;return 0<=k?(i(),!0):!1},i=function(){l();null!=f&&f.abort();f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType=c;var i=0;f.onprogress=function(a){g||(g=!0,h=window.setInterval(function(){4!=f.readyState&&5E3<Date.now()-i&&!j()&&(l(),e.handleError(b,"Download stalled"))},1E3));i=Date.now();e.handleProgress(b,a.loaded)};f.onerror=function(){if(0!=f.status||!j())l(),e.handleError(b,"HTTP error "+f.status)};f.onload=function(){var a=f.response;null==
a&&(a=f.responseText);l();d(a)};f.send()};i()},__class__:v});var $a=function(a,b){S.call(this,a);this._canvas=b};$a.__name__=!0;$a.__super__=S;$a.prototype=p(S.prototype,{__class__:$a});var Sa=function(a){this._disposed=!1;this.audioElement=a};Sa.__name__=!0;Sa.__interfaces__=[Fa];Sa.__super__=G;Sa.prototype=p(G.prototype,{loop:function(a){null==a&&(a=1);return new rb(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:Sa});var rb=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=
!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new l(b,function(){d.updateVolume()});this.updateVolume();this._complete=new E(!1);this.playAudio();m.hidden._value&&this.set_paused(!0)};rb.__name__=!0;rb.__interfaces__=[ob,nb];rb.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);
return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(ha.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=m.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=m.hidden.get_changed().connect(function(b){b?(a._wasPaused=
a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=m.volume._value*this.volume._value},__class__:rb};var Yb=function(){};Yb.__name__=!0;Yb.prototype={__class__:Yb};var ua=function(a){var b=this;this._canvas=a;this.resize=new ja;this.scaleFactor=ua.computeScaleFactor();1!=this.scaleFactor&&(o.setVendorStyle(this._canvas,"transform-origin","top left"),o.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));
o.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){o.callLater(Ha(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",Ha(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new E(null);null!=window.orientation&&(window.addEventListener("orientationchange",Ha(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new E(!1);o.addVendorListener(window.document,"fullscreenchange",
function(){b.updateFullscreen()},!1);this.updateFullscreen()};ua.__name__=!0;ua.__interfaces__=[Yb];ua.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=o.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};ua.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=
this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";o.callLater(function(){o.hideMobileBrowser();
o.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(o.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==o.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:ua};var o=function(){};o.__name__=!0;o.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};o.hideMobileBrowser=function(){window.scrollTo(1,0)};o.loadExtension=
function(a,b){null==b&&(b=window);var c=Ia.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+q.substr(a,1,null),d=0,e=o.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;var i=f+c,h=Ia.field(b,i);if(null!=h)return{prefix:f,field:i,value:h}}return{prefix:null,field:null,value:null}};o.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=o.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};o.polyfill=function(a,
b){null==b&&(b=window);var c=o.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};o.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=o.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};o.addVendorListener=function(a,b,c,d){for(var e=0,f=o.VENDOR_PREFIXES;e<f.length;){var i=f[e];++e;a.addEventListener(i+b,c,d)}a.addEventListener(b,c,d)};o.orientation=function(a){switch(a){case -90:case 90:return ia.Landscape;default:return ia.Portrait}};o.createEmptyCanvas=
function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};o.createCanvas=function(a){var b=o.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};o.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};
o.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var w=function(a){this._disposed=!1;this.buffer=a};w.__name__=!0;w.__interfaces__=[Fa];w.get_supported=function(){if(w._detectSupport){w._detectSupport=!1;var a=o.loadExtension("AudioContext").value;null!=a&&(w.ctx=new a,w.gain=w.createGain(),w.gain.connect(w.ctx.destination),m.volume.watch(function(a){w.gain.gain.value=
a}))}return null!=w.ctx};w.createGain=function(){return null!=w.ctx.createGain?w.ctx.createGain():w.ctx.createGainNode()};w.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};w.__super__=G;w.prototype=p(G.prototype,{loop:function(a){null==a&&(a=1);return new sb(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:w});var sb=function(a,b,c){var d=this;this._sound=a;this._head=w.gain;this._complete=new E(!1);this._sourceNode=w.ctx.createBufferSource();
this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};w.start(this._sourceNode,0);this.playAudio();this.volume=new l(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);m.hidden._value&&this.set_paused(!0)};sb.__name__=!0;sb.__interfaces__=[ob,nb];sb.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_position:function(){return this._complete._value?
this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(w.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=w.createGain(),this.insertNode(this._gainNode));
this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=w.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(ha.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=m.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},
__class__:sb};var Zb=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=
a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new tb(a);this._drawPatternShader=new ub(a);this._fillRectShader=new vb(a);this.resize(16)};Zb.__name__=!0;Zb.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=
this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareDrawPattern:function(a,b,c,
d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawPatternShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),
this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(0,
770);break;case 3:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&
(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=
new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=
this._currentRenderTarget=a},__class__:Zb};var Z=function(a,b){this._inverseProjection=this._stateList=null;null==Z._scratchQuadArray&&(Z._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};Z.__name__=!0;Z.__interfaces__=[Pa];Z.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new wb,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=
b},translate:function(a,b){var c=this._stateList.matrix;c.m02+=c.m00*a+c.m01*b;c.m12+=c.m10*a+c.m11*b},scale:function(a,b){var c=this._stateList.matrix;c.m00*=a;c.m10*=a;c.m01*=b;c.m11*=b},rotate:function(a){var b=this._stateList.matrix,a=3.141592653589793*a/180,c=Math.sin(a),a=Math.cos(a),d=b.m00,e=b.m10,f=b.m01,i=b.m11;b.m00=d*a+f*c;b.m10=e*a+i*c;b.m01=f*a-d*c;b.m11=i*a-e*c},transform:function(a,b,c,d,e,f){var i=this._stateList;Z._scratchMatrix.set(a,b,c,d,e,f);X.multiply(i.matrix,Z._scratchMatrix,
i.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,i){var h=this._stateList,g=a.root,b=this.transformQuad(b,c,f,i),c=g.width,g=g.height,d=(a.rootX+d)/c,e=(a.rootY+e)/g,f=d+f/c,i=e+i/g,c=h.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,h.blendMode,h.scissor,a),h=this._batcher.data;h[a]=b[0];h[++a]=b[1];h[++a]=d;h[++a]=e;h[++a]=c;h[++a]=b[2];h[++a]=
b[3];h[++a]=f;h[++a]=e;h[++a]=c;h[++a]=b[4];h[++a]=b[5];h[++a]=f;h[++a]=i;h[++a]=c;h[++a]=b[6];h[++a]=b[7];h[++a]=d;h[++a]=i;h[++a]=c},drawPattern:function(a,b,c,d,e){var f=this._stateList,i=a.root,b=this.transformQuad(b,c,d,e),d=d/i.width,e=e/i.height,i=f.alpha,a=this._batcher.prepareDrawPattern(this._renderTarget,f.blendMode,f.scissor,a),f=this._batcher.data;f[a]=b[0];f[++a]=b[1];f[++a]=0;f[++a]=0;f[++a]=i;f[++a]=b[2];f[++a]=b[3];f[++a]=d;f[++a]=0;f[++a]=i;f[++a]=b[4];f[++a]=b[5];f[++a]=d;f[++a]=
e;f[++a]=i;f[++a]=b[6];f[++a]=b[7];f[++a]=0;f[++a]=e;f[++a]=i},fillRect:function(a,b,c,d,e){var f=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,e=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,f.blendMode,f.scissor),i=this._batcher.data;i[f]=b[0];i[++f]=b[1];i[++f]=c;i[++f]=d;i[++f]=a;i[++f]=e;i[++f]=b[2];i[++f]=b[3];i[++f]=c;i[++f]=d;i[++f]=a;i[++f]=e;i[++f]=b[4];i[++f]=b[5];i[++f]=c;i[++f]=d;i[++f]=a;i[++f]=e;i[++f]=b[6];i[++f]=
b[7];i[++f]=c;i[++f]=d;i[++f]=a;i[++f]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,d){var e=this._stateList,f=Z._scratchQuadArray;f[0]=a;f[1]=b;f[2]=a+c;f[3]=b+d;e.matrix.transformArray(f,4,f);this._inverseProjection.transformArray(f,4,f);a=f[0];b=f[1];c=f[2]-a;d=f[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},
onResize:function(a,b){this._stateList=new wb;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new X;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,d){var c=a+c,d=b+d,e=Z._scratchQuadArray;e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,8,e);return e},__class__:Z};var wb=function(){this.scissor=this.prev=this.next=null;this.matrix=
new X;this.alpha=1;this.blendMode=J.Normal};wb.__name__=!0;wb.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=L.max(this.scissor.x,a),f=L.max(this.scissor.y,b),c=L.min(this.scissor.x+this.scissor.width,a+c),d=L.min(this.scissor.y+this.scissor.height,b+d),a=e,b=f,c=c-e,d=d-f;else this.scissor=new za;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:wb};var cb=function(a,b){var c=this;this._hasGPU=new E(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",
function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(Ha(this,this.onResize));this.init()};cb.__name__=!0;cb.__interfaces__=[Qa];cb.prototype={get_type:function(){return W.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new qa(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},
createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new Zb(this.gl);this.graphics=new Z(this.batcher,null);this.onResize()},__class__:cb};var xb=function(a,b,c){ba.call(this,a,b,c)};xb.__name__=!0;xb.__super__=ba;xb.prototype=
p(ba.prototype,{__class__:xb});var qa=function(a,b,c){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=L.max(2,Xb.nextPowerOfTwo(b));this.height=L.max(2,Xb.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};qa.__name__=!0;qa.__interfaces__=[kc];qa.drawBorder=function(a,b,c){var d=
a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};qa.__super__=G;qa.prototype=p(G.prototype,{createTexture:function(a,b){return new xb(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=o.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);qa.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},onDisposed:function(){var a=
this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:qa});var N=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,N.createShader(a,35633,b));a.attachShader(this._program,N.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};N.__name__=!0;N.createShader=function(a,b,c){b=
a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};N.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:N};var ub=function(a){N.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};ub.__name__=!0;
ub.__super__=N;ub.prototype=p(N.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,d){this._gl.uniform4f(this.u_region,a,b,c,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},
__class__:ub});var tb=function(a){N.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};tb.__name__=!0;tb.__super__=N;tb.prototype=p(N.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,
2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:tb});var vb=function(a){N.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");
this.a_alpha=this.getAttribLocation("a_alpha")};vb.__name__=!0;vb.__super__=N;vb.prototype=p(N.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:vb});var yb=function(){this._width=this._height=-1;this._transitor=
null;this.scenes=[];this.occludedScenes=[];this._root=new x};yb.__name__=!0;yb.__super__=u;yb.prototype=p(u.prototype,{get_name:function(){return"Director_1"},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&
this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=
this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);q.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_3;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_3;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_3;if(null==b||b.opaque)break}this.occludedScenes=
0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new $b(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},get_width:function(){return 0>this._width?m._platform.getStage().get_width():
this._width},get_height:function(){return 0>this._height?m._platform.getStage().get_height():this._height},__class__:yb});var $b=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};$b.__name__=!0;$b.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:$b};var zb=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new ja;
this.hidden=new ja};zb.__name__=!0;zb.__super__=u;zb.prototype=p(u.prototype,{get_name:function(){return"Scene_3"},__class__:zb});var Ta=function(){};Ta.__name__=!0;Ta.prototype={init:function(a,b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Ta};var ka=function(a,b){this._duration=a;this._ease=null!=b?b:y.linear};ka.__name__=!0;ka.__super__=Ta;ka.prototype=p(Ta.prototype,{init:function(a,b,c){Ta.prototype.init.call(this,a,b,c);this._elapsed=
0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/this._duration)},__class__:ka});var Ab=function(a,b){this._direction=2;ka.call(this,a,b)};Ab.__name__=!0;Ab.__super__=ka;Ab.prototype=p(ka.prototype,{init:function(a,b,c){ka.prototype.init.call(this,a,b,c);switch(this._direction){case 0:this._x=0;this._y=-this._director.get_height();break;case 1:this._x=0;this._y=this._director.get_height();break;case 2:this._x=
-this._director.get_width();this._y=0;break;case 3:this._x=this._director.get_width(),this._y=0}a=this._from._compMap.Sprite_0;null==a&&this._from.add(a=new j);a.setXY(0,0);a=this._to._compMap.Sprite_0;null==a&&this._to.add(a=new j);a.setXY(-this._x,-this._y)},update:function(a){a=ka.prototype.update.call(this,a);this._from._compMap.Sprite_0.setXY(this.interp(0,this._x),this.interp(0,this._y));this._to._compMap.Sprite_0.setXY(this.interp(-this._x,0),this.interp(-this._y,0));return a},complete:function(){this._from._compMap.Sprite_0.setXY(0,
0);this._to._compMap.Sprite_0.setXY(0,0)},__class__:Ab});var ra=function(){};ra.__name__=!0;ra.prototype={__class__:ra};var la=function(a){this._fn=a};la.__name__=!0;la.__interfaces__=[ra];la.prototype={update:function(){this._fn();return 0},__class__:la};var Ua=function(a){this._duration=a;this._elapsed=0};Ua.__name__=!0;Ua.__interfaces__=[ra];Ua.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},
__class__:Ua};var Bb=function(a,b,c,d,e){this._x=a;this._y=b;this._seconds=c;this._easingX=d;this._easingY=e};Bb.__name__=!0;Bb.__interfaces__=[ra];Bb.prototype={update:function(a,b){var c=b._compMap.Sprite_0;null==this._tweenX&&(this._tweenX=new ya(c.x._value,this._x,this._seconds,this._easingX),c.x.set_behavior(this._tweenX),c.x.update(a),this._tweenY=new ya(c.y._value,this._y,this._seconds,null!=this._easingY?this._easingY:this._easingX),c.y.set_behavior(this._tweenY),c.y.update(a));return c.x._behavior!=
this._tweenX&&c.y._behavior!=this._tweenY?(c=L.max(this._tweenX.elapsed,this._tweenY.elapsed)-this._seconds,this._tweenY=this._tweenX=null,0<c?Math.max(0,a-c):0):-1},__class__:Bb};var ca=function(){this.stopAll()};ca.__name__=!0;ca.__super__=u;ca.prototype=p(u.prototype,{get_name:function(){return"Script_5"},run:function(a){a=new Cb(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=
c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:ca});var Cb=function(a){this.removed=!1;this.action=a};Cb.__name__=!0;Cb.__interfaces__=[$];Cb.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:Cb};var Ga=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};Ga.__name__=!0;Ga.__interfaces__=[ra];Ga.prototype={update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;
++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:Ga};var ma=function(a,b,c){this._strengthX=a;this._strengthY=b;this._duration=c;this._elapsed=0};ma.__name__=!0;ma.__interfaces__=[ra];ma.prototype={update:function(a,b){var c=b._compMap.Sprite_0;null==this._jitterX&&(this._jitterX=new La(c.x._value,this._strengthX),this._jitterY=new La(c.y._value,this._strengthY),c.x.set_behavior(this._jitterX),c.y.set_behavior(this._jitterY));this._elapsed+=
a;if(this._elapsed>=this._duration){var d=this._elapsed-this._duration;c.x._behavior==this._jitterX&&c.x.set__(this._jitterX.base);c.y._behavior==this._jitterY&&c.y.set__(this._jitterY.base);this._jitterY=this._jitterX=null;this._elapsed=0;return a-d}return-1},__class__:ma};var W={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};W.Stage3D.toString=t;W.Stage3D.__enum__=W;W.WebGL=["WebGL",1];W.WebGL.toString=t;W.WebGL.__enum__=W;W.Canvas=["Canvas",2];W.Canvas.toString=
t;W.Canvas.__enum__=W;var hc=function(){};hc.__name__=!0;hc.that=function(){};var Mb=function(){};Mb.__name__=!0;Mb.set=function(a,b,c){return c?a|b:a&~b};var Va=function(){this.mainSection=new Q;this.sections=new Q};Va.__name__=!0;Va.parse=function(a){for(var b=new Va,c=new U("^\\s*;",""),d=new U("^\\s*\\[\\s*([^\\]]*)\\s*\\]",""),e=new U("^\\s*([\\w\\.\\-_]+)\\s*=\\s*(.*)",""),f=b.mainSection,i=0,a=(new U("\r\n|\r|\n","g")).split(a);i<a.length;){var h=a[i];++i;if(!c.match(h))if(d.match(h))h=d.matched(1),
b.sections.exists(h)?f=b.sections.get(h):(f=new Q,b.sections.set(h,f));else if(e.match(h)){var h=e.matched(1),g=e.matched(2),l=g.charCodeAt(0);if((34==l||39==l)&&g.charCodeAt(g.length-1)==l)g=q.substr(g,1,g.length-2);g=P.replace(P.replace(P.replace(P.replace(P.replace(P.replace(g,"\\n","\n"),"\\r","\r"),"\\t","\t"),"\\'","'"),'\\"','"'),"\\\\","\\");f.set(h,g)}}return b};Va.prototype={get:function(a){var b=a.indexOf(".");if(0>b)return this.mainSection.get(a);var c;c=this.sections.get(q.substr(a,0,
b));return null!=c?(a=q.substr(a,b+1,null),c.get(a)):null},__class__:Va};var Wa=function(a){this.config=a;this.missingTranslation=new A};Wa.__name__=!0;Wa.parse=function(a){return new Wa(Va.parse(a))};Wa.prototype={get:function(a,b){var c=this.config.get(a);return null==c?(this.missingTranslation.emit(a),a):null!=b?D.substitute(c,b):c},__class__:Wa};var kb=function(){this.success=new A;this.error=new A;this.progressChanged=new ja;this.hasResult=!1;this._total=this._progress=0};kb.__name__=!0;kb.prototype=
{set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:kb};var ac=function(a){this._state=null!=a?a:Math.floor(2147483647*
Math.random())};ac.__name__=!0;ac.prototype={__class__:ac};var ja=function(a){C.call(this,a)};ja.__name__=!0;ja.__super__=C;ja.prototype=p(C.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ja});var Kb=function(a){this.next=
null;this.fn=a};Kb.__name__=!0;Kb.prototype={__class__:Kb};var D=function(){};D.__name__=!0;D.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?q.substr(a,b+1,null):null};D.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?q.substr(a,0,b):a};D.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=q.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=q.substr(a,b+1,null));return D.getFileExtension(a)};D.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-
1)&&(a+="/");return a+b};D.substitute=function(a,b){for(var c=0,d=b.length;c<d;)var e=c++,a=P.replace(a,"{"+e+"}",b[e]);return a};D.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var e=b[d],f=b[d+1];if(z.is(f,Error)){var i=f.stack;null!=i&&(f=i)}a+=e+"="+z.string(f);d+=2}a+="]"}return a};var da=function(){this.h={}};da.__name__=!0;da.__interfaces__=[dc];da.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},
remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:da};var Q=function(){this.h={}};Q.__name__=!0;Q.__interfaces__=[dc];Q.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return q.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},
next:function(){return this.ref["$"+this.it.next()]}}},__class__:Q};var gc=function(){};gc.__name__=!0;gc.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var ga=function(){};ga.__name__=!0;ga.parse=function(a){var b=n.createDocument();ga.doParse(a,0,b);return b};ga.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,f=1,i=null,h=0,g=0,l=0,k=a.charCodeAt(b),j=new Za;k==k;){switch(e){case 0:switch(k){case 10:case 13:case 9:case 32:break;default:e=f;continue}break;case 1:switch(k){case 60:e=
0;f=2;break;default:h=b;e=13;continue}break;case 13:60==k?(f=n.createPCData(j.b+q.substr(a,h,b-h)),j=new Za,c.addChild(f),g++,e=0,f=2):38==k&&(j.addSub(a,h,b-h),e=18,f=13,h=b+1);break;case 17:93==k&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=n.createCData(q.substr(a,h,b-h)),c.addChild(e),g++,b+=2,e=1);break;case 2:switch(k){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=q.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+
1)){if("OCTYPE"!=q.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}h=b+1;break;case 63:e=14;h=b;break;case 47:if(null==c)throw"Expected node name";h=b+1;e=0;f=10;break;default:e=3;h=b;continue}break;case 3:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(b==h)throw"Expected node name";d=n.createElement(q.substr(a,h,b-h));c.addChild(d);e=0;f=4;continue}break;case 4:switch(k){case 47:e=
11;g++;break;case 62:e=9;g++;break;default:e=5;h=b;continue}break;case 5:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(h==b)throw"Expected attribute name";i=q.substr(a,h,b-h);if(d.exists(i))throw"Duplicate attribute";e=0;f=6;continue}break;case 6:switch(k){case 61:e=0;f=7;break;default:throw"Expected =";}break;case 7:switch(k){case 34:case 39:e=8;h=b;break;default:throw'Expected "';}break;case 8:k==a.charCodeAt(h)&&(f=q.substr(a,h+1,b-h-1),d.set(i,f),e=0,f=4);break;
case 9:h=b=ga.doParse(a,b,d);e=1;break;case 11:switch(k){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(k){case 62:return 0==g&&c.addChild(n.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(h==b)throw"Expected node name";if(q.substr(a,h,b-h)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;f=12;continue}break;case 15:45==k&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(n.createComment(q.substr(a,
h,b-h))),b+=2,e=1);break;case 16:91==k?l++:93==k?l--:62==k&&0==l&&(c.addChild(n.createDocType(q.substr(a,h,b-h))),e=1);break;case 14:63==k&&62==a.charCodeAt(b+1)&&(b++,e=q.substr(a,h+1,b-h-2),c.addChild(n.createProcessingInstruction(e)),e=1);break;case 18:59==k&&(h=q.substr(a,h,b-h),35==h.charCodeAt(0)?(h=120==h.charCodeAt(1)?z.parseInt("0"+q.substr(h,1,h.length-1)):z.parseInt(q.substr(h,1,h.length-1)),j.add(String.fromCharCode(h))):ga.escapes.exists(h)?j.add(ga.escapes.get(h)):j.b+=z.string("&"+
h+";"),h=b+1,e=f)}k=P.fastCodeAt(a,++b)}1==e&&(h=b,e=13);if(13==e)return(b!=h||0==g)&&c.addChild(n.createPCData(j.b+q.substr(a,h,b-h))),b;throw"Unexpected end";};var H=function(){};H.__name__=!0;H.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};H.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==
a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+H.__string_rec(a[f],b)):c+H.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+H.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(i){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||
"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+H.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};H.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||H.__interfLoop(f,b))return!0}return H.__interfLoop(a.__super__,b)};H.__instanceof=function(a,b){if(null==b)return!1;switch(b){case tc:return(a|
0)===a;case qc:return"number"==typeof a;case rc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case uc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||H.__interfLoop(H.getClass(a),b)))return!0}else return!1;return b==vc&&null!=a.__name__||b==wc&&null!=a.__ename__?!0:a.__enum__==b}};var fc=function(){};fc.__name__=!0;fc.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=
d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var Db=function(a){this.speed=new l(a)};Db.__name__=!0;Db.__super__=u;Db.prototype=p(u.prototype,{get_name:function(){return"BackgroundScroller_7"},onUpdate:function(a){this.speed.update(a);var b=this.owner._compMap.Sprite_0,c=b.y;for(c.set__(c._value+a*this.speed._value);0<b.y._value;)a=b.y,a.set__(a._value-256)},__class__:Db});var sa=function(a,b,c,d){this._ctx=a;this._tileX=b;this._tileY=c;this._rotation=d};sa.__name__=!0;sa.__super__=
u;sa.prototype=p(u.prototype,{get_name:function(){return"BendTile_13"},onAdded:function(){var a=this._ctx.pack.getTexture("tiles/bend");this.owner.add(new R(a));a=new ea;a.tileX=this._tileX;a.tileY=this._tileY;a.topOpen=0==this._rotation||3==this._rotation;a.bottomOpen=1==this._rotation||2==this._rotation;a.leftOpen=2==this._rotation||3==this._rotation;a.rightOpen=0==this._rotation||1==this._rotation;this.owner.add(a)},__class__:sa});var Eb=function(a,b,c,d){this._ctx=a;this._tileX=b;this._tileY=
c;this._rotation=d};Eb.__name__=!0;Eb.__super__=u;Eb.prototype=p(u.prototype,{get_name:function(){return"BlockTile_16"},onAdded:function(){var a=this._ctx.pack.getTexture("tiles/block");this.owner.add(new R(a));a=new ea;a.tileX=this._tileX;a.tileY=this._tileY;a.topOpen=!1;a.bottomOpen=!1;a.leftOpen=!1;a.rightOpen=!1;this.owner.add(a)},__class__:Eb});var Fb=function(a,b,c,d){this._ctx=a;this._tileX=b;this._tileY=c;this._rotation=d};Fb.__name__=!0;Fb.__super__=u;Fb.prototype=p(u.prototype,{get_name:function(){return"EmptyTile_14"},
onAdded:function(){var a=this._ctx.pack.getTexture("tiles/empty");this.owner.add(new R(a));a=new ea;a.tileX=this._tileX;a.tileY=this._tileY;a.topOpen=!1;a.bottomOpen=!1;a.leftOpen=!1;a.rightOpen=!1;this.owner.add(a)},__class__:Fb});var bc=function(a,b,c){this.pack=a;this.director=c;this.random=new ac(1337);this.messages=Wa.parse(b.getFile("messages.ini").toString());this.arialFont=new Ba(this.pack,"fonts/handel");this.hurtParams=new fa;this.hurtParams.generateHitHurt();this.jumpParams=new fa;this.jumpParams.generateJump();
this.powerupParams=new fa;this.powerupParams.generatePowerup();this.explosionParams=new fa;this.explosionParams.generateExplosion();this.beepParams=new fa;this.beepParams.generateBlipSelect();this.coinParams=new fa;this.coinParams.generatePickupCoin()};bc.__name__=!0;bc.prototype={enterPlayScene:function(a){null==a&&(a=!0);this.director.unwindToScene(lc.create(this),a?new Ab(0.5,y.quadOut):null)},showPrompt:function(a,b,c){this.director.pushScene(mc.create(this,a,b,c))},playHurt:function(){this.hurtParams.mutate();
this.hurtParams.masterVolume=0.3;(new T(this.hurtParams)).player()},playJump:function(){this.jumpParams.mutate();this.jumpParams.masterVolume=0.2;(new T(this.jumpParams)).player()},playPowerup:function(){this.powerupParams.mutate();this.powerupParams.masterVolume=0.3;(new T(this.powerupParams)).player()},playExplosion:function(){this.explosionParams.mutate();this.explosionParams.sustainTime=0.3;this.explosionParams.masterVolume=0.3;(new T(this.explosionParams)).player()},playBeep:function(){this.beepParams.mutate();
this.beepParams.masterVolume=0.3;(new T(this.beepParams)).player()},playCoin:function(){this.coinParams.mutate();this.coinParams.masterVolume=0.3;(new T(this.coinParams)).player()},__class__:bc};var ta=function(a,b,c,d){this._ctx=a;this._tileX=b;this._tileY=c;this._rotation=d};ta.__name__=!0;ta.__super__=u;ta.prototype=p(u.prototype,{get_name:function(){return"GoalTile_11"},onAdded:function(){var a=this._ctx.pack.getTexture("tiles/goal");this.owner.add(new R(a));a=new ea;a.tileX=this._tileX;a.tileY=
this._tileY;a.topOpen=0==this._rotation;a.bottomOpen=2==this._rotation;a.leftOpen=3==this._rotation;a.rightOpen=1==this._rotation;this.owner.add(a)},__class__:ta});var Gb=function(a,b,c,d){this._ctx=a;this._tileX=b;this._tileY=c;this._rotation=d};Gb.__name__=!0;Gb.__super__=u;Gb.prototype=p(u.prototype,{get_name:function(){return"GrassTile_15"},onAdded:function(){var a=this._ctx.pack.getTexture("tiles/grass");this.owner.add(new R(a));a=new ea;a.tileX=this._tileX;a.tileY=this._tileY;a.topOpen=!0;a.bottomOpen=
!0;a.leftOpen=!0;a.rightOpen=!0;this.owner.add(a)},__class__:Gb});var O=function(a){this.totalMoves=0;this._levelIndex=1;this._ctx=a;this._zoom=new l(1);this.moves=new E(0)};O.__name__=!0;O.__super__=u;O.prototype=p(u.prototype,{get_name:function(){return"LevelModel_4"},onAdded:function(){this._worldLayer=new x;this._worldLayer.add((new j).centerAnchor());this.owner.addChild(this._worldLayer);var a=new Da(this._ctx.pack.getTexture("backgrounds/background"),O.WIDTH,O.HEIGHT);a.setScale(2);this._worldLayer.addChild((new x).add(a).add(new Db(100)));
this._worldLayer.addChild(this._mapLayer=new x);this.loadMap(this._levelIndex)},loadMap:function(a){var b=this;this._mapLayer.disposeChildren();var c=new Hb(this._ctx,"levels/level"+a+".lvl",O.TILE_SIZE,O.WIDTH,O.HEIGHT);this._mapLayer.add(new j);this._mapLayer.add(c);this.totalMoves+=this.moves._value;c.moves.watch(function(a){b.moves.set__(a)});var d=this._ctx.messages.get("level"+a,[this.totalMoves]);if(d!="level"+a){var e=new db(0.5);this._worldLayer.add(e);var f=new ca;this.owner.add(f);f.run(new Ga([new la(function(){e.scale.animateTo(0,
1)}),new Ua(1),new la(function(){b._ctx.showPrompt(b._ctx.messages.get("info_heading",[a]),d,["play",function(){b._ctx.director.unwindToScene(b.owner);e.scale.animateTo(1,1)}]);f.dispose()})]))}c.playerEntity._compMap.Player_10.onWin.connect(function(){b._ctx.playPowerup();b.loadMap(++b._levelIndex)})},onUpdate:function(){},__class__:O});var nc=function(){};nc.__name__=!0;nc.main=function(){m.init();var a=new yb;m.root.add(a);var b=F.fromAssets("bootstrap");m._platform.loadAssetPack(b).get(function(b){m.loadAssetPack(F.fromAssetsLocalized("locale")).get(function(d){var e=
m.loadAssetPack(F.fromAssets("main"));e.get(function(e){(new bc(e,d,a)).enterPlayScene(!1);b.dispose()});e=oc.create(b,e);a.unwindToScene(e)})})};var Hb=function(a,b,c,d,e){this._ctx=a;this._file=b;this.TILE_SIZE=c;this.WIDTH=d;this.HEIGHT=e;this.moves=new E(0)};Hb.__name__=!0;Hb.__super__=u;Hb.prototype=p(u.prototype,{get_name:function(){return"Map_8"},onAdded:function(){for(var a=this,b=[],c=0;5>c;)c++,b.push(function(){for(var a=[],b=0;7>b;)b++,a.push(new x);return a}(this));this.tiles=b;for(var d=
!1,e=0,f=0,i=(new r(this._ctx.pack,"particles/explode")).createEmitter(),b=(new x).add(i),c=this._ctx.pack.getFile(this._file).toString().split("\n"),h=0;5>h;)for(var g=h++,l=0;7>l;){var k=l++,j=this.tiles[g][k],m=Math.floor(4*Math.random());Math.random();switch(c[g].charAt(k)){case "|":j.add(new Xa(this._ctx,k,g,m=0));break;case "-":j.add(new Xa(this._ctx,k,g,m=1));break;case "L":j.add(new sa(this._ctx,k,g,m=0));break;case "<":j.add(new sa(this._ctx,k,g,m=1));break;case ">":j.add(new sa(this._ctx,
k,g,m=2));break;case "V":j.add(new sa(this._ctx,k,g,m=3));break;case " ":j.add(new Fb(this._ctx,k,g,m));break;case "W":j.add(new ta(this._ctx,k,g,m=0));break;case "E":j.add(new ta(this._ctx,k,g,m=1));break;case "M":j.add(new ta(this._ctx,k,g,m=2));break;case "3":j.add(new ta(this._ctx,k,g,m=3));break;case "G":j.add(new Gb(this._ctx,k,g,m));break;case "X":j.add(new Eb(this._ctx,k,g,m));break;default:null}j=[j._compMap.Sprite_0];j[0].centerAnchor();j[0].setXY(this.WIDTH/2,this.HEIGHT/2);j[0].x.animateTo(k*
this.TILE_SIZE+this.TILE_SIZE/2,1+Math.random(),y.elasticOut);j[0].y.animateTo(g*this.TILE_SIZE+this.TILE_SIZE/2,1+Math.random(),y.elasticOut);j[0].scaleX.animateTo(1,1+Math.random(),y.elasticOut);j[0].scaleY.animateTo(1,1+Math.random(),y.elasticOut);j[0].rotation.animateTo([0,90,180,270][m],1+Math.random(),y.elasticOut);k=this.tiles[g][k];k.add(j[0]);this.owner.addChild(k);k=[k._compMap.TileData_9];j[0].get_pointerDown().connect(function(){return function(b){d=!0;e=Math.floor(b.viewX/a.TILE_SIZE);
f=Math.floor(b.viewY/a.TILE_SIZE)}}());j[0].get_pointerUp().connect(function(b,c){return function(){if(d){d=!1;var h=b[0].tileX,g=b[0].tileY;if(0==Math.abs(h-e)&&0==Math.abs(g-f)){var k=a.playerEntity._compMap.Player_10;if(null!=k._tile){var j=k._tile._compMap.TileData_9,l=j.tileY;1==Math.abs(j.tileX-h)+Math.abs(l-g)&&a.canMoveToTile(j,b[0])&&(k.moveToTile(c[0].owner),a._ctx.playJump(),h=a.moves,g=h._value,h.set__(g+1),g)}}else if(!(0!=Math.abs(h-e)&&0!=Math.abs(g-f)))if(0!=Math.abs(h-e)){for(var m=
!1,k=0,j=a.getRow(g);k<j.length;)l=j[k],++k,null!=l._compMap.BlockTile_16&&(m=new ca,l.add(m),m.run(new ma(5,5,0.5)),i.setXY(l._compMap.Sprite_0.x._value,l._compMap.Sprite_0.y._value),i.restart(),a._ctx.playHurt(),m=!0);m||(a.moveRow(g,h-e),a._ctx.playExplosion(),h=a.moves,g=h._value,h.set__(g+1),g)}else if(0!=Math.abs(g-f)){m=!1;k=0;for(j=a.getColumn(h);k<j.length;)l=j[k],++k,null!=l._compMap.BlockTile_16&&(m=new ca,l.add(m),m.run(new ma(5,5,0.5)),i.setXY(l._compMap.Sprite_0.x._value,l._compMap.Sprite_0.y._value),
i.restart(),a._ctx.playHurt(),m=!0);m||(a.moveColumn(h,g-f),a._ctx.playExplosion(),h=a.moves,g=h._value,h.set__(g+1),g)}}}}(k,j))}var n=new Ib(this._ctx,"player/player");this.playerEntity=(new x).add(n);this.owner.addChild(this.playerEntity);this.owner.addChild(b);var o=this.playerEntity._compMap.Sprite_0;o.setAlpha(0);var p=new ca;this.owner.add(p);p.run(new Ga([new ma(2,2,0.5),new la(function(){var b=a.tiles[2][2],c=b._compMap.Sprite_0;o.setXY(c.x._value,c.y._value);o.setScale(5);n.moveToTile(b);
o.scaleX.animateTo(0.75,1,y.bounceOut);o.scaleY.animateTo(0.75,1,y.bounceOut);o.alpha.animateTo(1,1,y.bounceOut)}),new Ua(0.3),new la(function(){var b=a.tiles[2][2]._compMap.Sprite_0;i.setXY(b.x._value,b.y._value);i.restart();a._ctx.playExplosion();p.dispose()})]))},onUpdate:function(){},canMoveToTile:function(a,b){return b.tileX<a.tileX&&(!a.leftOpen||!b.rightOpen)||b.tileX>a.tileX&&(!a.rightOpen||!b.leftOpen)||b.tileY<a.tileY&&(!a.topOpen||!b.bottomOpen)||b.tileY>a.tileY&&(!a.bottomOpen||!b.topOpen)?
!1:!0},getRow:function(a){return this.tiles[a]},getColumn:function(a){for(var b=[],c=0,d=this.tiles;c<d.length;){var e=d[c];++c;b.push(e[a])}return b},moveRow:function(a,b){var c=this.tiles[a];0<b?c.unshift(c.pop()):0>b&&c.push(c.shift());for(var d=0,e=0;e<c.length;){var f=c[e];++e;f._compMap.TileData_9.tileX=d;f._compMap.Sprite_0.x.animateTo(d*this.TILE_SIZE+this.TILE_SIZE/2,1,y.elasticOut);d++}c=new ca;this.owner.add(c);c.run(new ma(2,1,0.4))},moveColumn:function(a,b){for(var c=[],d=0,e=this.tiles;d<
e.length;){var f=e[d];++d;c.push(f[a])}0<b?c.unshift(c.pop()):0>b&&c.push(c.shift());d=0;for(e=c.length;d<e;){var f=d++,g=c[f];g._compMap.TileData_9.tileY=f;g._compMap.Sprite_0.y.animateTo(f*this.TILE_SIZE+this.TILE_SIZE/2,1,y.elasticOut);this.tiles[f][a]=g}c=new ca;this.owner.add(c);c.run(new ma(2,1,0.4))},__class__:Hb});var lc=function(){};lc.__name__=!0;lc.create=function(a){var b=new x,c=new O(a);a.level=c;b.add(c);var d=new Ea(a.arialFont);d.setXY(m._platform.getStage().get_width()/2,20);d.centerAnchor();
d.setAlign(M.Center);b.addChild((new x).add(d));c.moves.watch(function(a){d.set_text("Moves used: "+a);d.setScale(1.5);d.scaleX.animateTo(1,0.7,y.elasticOut);d.scaleY.animateTo(1,0.7,y.elasticOut);d.letterSpacing.set__(5);d.letterSpacing.animateTo(1,0.7,y.elasticOut)});a.pack.getSound("music/main").loop(0.2);return b};var Ib=function(a,b){this.onWin=new ja;this._moveSpeed=300;this._ctx=a;this._name=b};Ib.__name__=!0;Ib.__super__=u;Ib.prototype=p(u.prototype,{get_name:function(){return"Player_10"},
onAdded:function(){var a=this._ctx.pack.getTexture(this._name);this._sprite=this.owner._compMap.Sprite_0;null==this._sprite&&this.owner.add(this._sprite=new R(a));this._sprite.texture=a;this._sprite.disablePixelSnapping();this._sprite.disablePointer();this._sprite.centerAnchor()},onUpdate:function(){if(null!=this._tile){var a=this._tile._compMap.Sprite_0;this._sprite.setXY(a.x._value,a.y._value)}},moveToTile:function(a){var b=this,c=a._compMap.Sprite_0,d=Math.sqrt(Math.pow(c.x._value-this._sprite.x._value,
2)+Math.pow(c.y._value-this._sprite.y._value,2))/this._moveSpeed,e=new ca;this.owner.add(e);e.run(new Ga([new Bb(c.x._value,c.y._value,d,y.elasticOut,y.elasticOut),new la(function(){b._tile=a;e.dispose();null!=a._compMap.GoalTile_11&&b.onWin.emit()})]));this._tile=null},__class__:Ib});var oc=function(){};oc.__name__=!0;oc.create=function(a,b){var c=new x,d=new Aa(2105376,m._platform.getStage().get_width(),m._platform.getStage().get_height());c.addChild((new x).add(d));var d=new R(a.getTexture("progress/Left")),
e=new R(a.getTexture("progress/Right")),f=m._platform.getStage().get_width()-d.texture.get_width()-e.texture.get_width()-40,g=m._platform.getStage().get_height()/2-d.texture.get_height();d.setXY(20,g);c.addChild((new x).add(d));var h=new Da(a.getTexture("progress/Background"),f);h.setXY(d.x._value+d.texture.get_width(),g);c.addChild((new x).add(h));var j=new Da(a.getTexture("progress/Fill"));j.setXY(h.x._value,g);b.progressChanged.connect(function(){j.width.set__(b._progress/b._total*f)});c.addChild((new x).add(j));
e.setXY(j.x._value+f,g);c.addChild((new x).add(e));return c};var mc=function(){};mc.__name__=!0;mc.create=function(a,b,c,d){var e=new x;e.add(new zb(!1));var f=new Aa(0,m._platform.getStage().get_width(),m._platform.getStage().get_height());f.alpha.animate(0,0.5,0.5);e.addChild((new x).add(f));b=new Ea(a.arialFont,b);b.setWrapWidth(m._platform.getStage().get_width()).setAlign(M.Center);b.x.animate(-m._platform.getStage().get_width(),0,0.5,y.backOut);b.y.set__(m._platform.getStage().get_height()/2-
150);f=new Aa(0,m._platform.getStage().get_width(),b.getNaturalHeight()+5);f.alpha.animate(0,0.5,0.5);f.y.set__(b.y._value);c=new Ea(a.arialFont,c);c.setWrapWidth(m._platform.getStage().get_width()).setAlign(M.Center);c.x.animate(-m._platform.getStage().get_width(),0,0.5,y.backOut);c.y.set__(m._platform.getStage().get_height()/2-80);e.addChild((new x).add(f));e.addChild((new x).add(b));e.addChild((new x).add(c));for(var b=new x,g=f=0;g<d.length;){var h=d[g++],l=[d[g++]],h=new R(a.pack.getTexture("buttons/"+
h));h.setXY(f,0);h.get_pointerDown().connect(function(b){return function(){a.playBeep();b[0]()}}(l));f+=h.getNaturalWidth()+20;b.addChild((new x).add(h))}d=j.getBounds(b);f=new j;f.x.animate(m._platform.getStage().get_width(),m._platform.getStage().get_width()/2-d.width/2,0.5,y.backOut);f.y.set__(c.y._value+c.getNaturalHeight()+50);e.addChild(b.add(f));a.playCoin();return e};var Xa=function(a,b,c,d){this._ctx=a;this._tileX=b;this._tileY=c;this._rotation=d};Xa.__name__=!0;Xa.__super__=u;Xa.prototype=
p(u.prototype,{get_name:function(){return"StraightTile_12"},onAdded:function(){var a=this._ctx.pack.getTexture("tiles/straight");this.owner.add(new R(a));a=new ea;a.tileX=this._tileX;a.tileY=this._tileY;var b=0==this._rotation||2==this._rotation;a.topOpen=b;a.bottomOpen=b;a.leftOpen=!b;a.rightOpen=!b;this.owner.add(a)},__class__:Xa});var ea=function(){};ea.__name__=!0;ea.__super__=u;ea.prototype=p(u.prototype,{get_name:function(){return"TileData_9"},onAdded:function(){},onUpdate:function(){},__class__:ea});
var T=function(a){this._params=null!=a?a:new fa;this.buffer=[];this.reset(!0);this.synthWave(this.buffer);this.player=this.makePlayer(this.buffer)};T.__name__=!0;T.prototype={reset:function(a){var b=this._params;this._period=100/(b.startFrequency*b.startFrequency+0.0010);this._maxPeriod=100/(b.minFrequency*b.minFrequency+0.0010);this._slide=1-0.01*b.slide*b.slide*b.slide;this._deltaSlide=1.0E-6*-b.deltaSlide*b.deltaSlide*b.deltaSlide;0==b.waveType&&(this._squareDuty=0.5-0.5*b.squareDuty,this._dutySweep=
5.0E-5*-b.dutySweep);this._changeAmount=0<b.changeAmount?1-0.9*b.changeAmount*b.changeAmount:1+10*b.changeAmount*b.changeAmount;this._changeTime=0;this._changeLimit=1==b.changeSpeed?0:2E4*(1-b.changeSpeed)*(1-b.changeSpeed)+32|0;if(a){this._masterVolume=b.masterVolume*b.masterVolume;this._waveType=b.waveType;0.01>b.sustainTime&&(b.sustainTime=0.01);a=b.attackTime+b.sustainTime+b.decayTime;0.18>a&&(a=0.18/a,b.attackTime*=a,b.sustainTime*=a,b.decayTime*=a);this._sustainPunch=b.sustainPunch;this._phase=
0;this._minFreqency=b.minFrequency;this._filters=1!=b.lpFilterCutoff||0!=b.hpFilterCutoff;this._lpFilterDeltaPos=this._lpFilterPos=0;this._lpFilterCutoff=0.1*b.lpFilterCutoff*b.lpFilterCutoff*b.lpFilterCutoff;this._lpFilterDeltaCutoff=1+1.0E-4*b.lpFilterCutoffSweep;this._lpFilterDamping=5/(1+20*b.lpFilterResonance*b.lpFilterResonance)*(0.01+this._lpFilterCutoff);0.8<this._lpFilterDamping&&(this._lpFilterDamping=0.8);this._lpFilterDamping=1-this._lpFilterDamping;this._lpFilterOn=1!=b.lpFilterCutoff;
this._hpFilterPos=0;this._hpFilterCutoff=0.1*b.hpFilterCutoff*b.hpFilterCutoff;this._hpFilterDeltaCutoff=1+3.0E-4*b.hpFilterCutoffSweep;this._vibratoPhase=0;this._vibratoSpeed=0.01*b.vibratoSpeed*b.vibratoSpeed;this._vibratoAmplitude=0.5*b.vibratoDepth;this._envelopeTime=this._envelopeStage=this._envelopeVolume=0;this._envelopeLength0=1E5*b.attackTime*b.attackTime;this._envelopeLength1=1E5*b.sustainTime*b.sustainTime;this._envelopeLength2=1E5*b.decayTime*b.decayTime+10;this._envelopeLength=this._envelopeLength0;
this._envelopeFullLength=this._envelopeLength0+this._envelopeLength1+this._envelopeLength2;this._phaser=0!=b.phaserOffset||0!=b.phaserSweep;this._phaserOffset=1020*b.phaserOffset*b.phaserOffset;0>b.phaserOffset&&(this._phaserOffset=-this._phaserOffset);this._phaserDeltaOffset=0.2*b.phaserSweep*b.phaserSweep*b.phaserSweep;this._phaserPos=0;this._phaserBuffer=[];for(a=0;1024>a;)a++,this._phaserBuffer.push(0);this._noiseBuffer=[];for(a=0;32>a;)a++,this._noiseBuffer.push(2*Math.random()-1);this._repeatTime=
0;this._repeatLimit=0==b.repeatSpeed?0:(2E4*(1-b.repeatSpeed)*(1-b.repeatSpeed)|0)+32}},synthWave:function(a){var b=!1;for(this._bufferSample=this._sampleCount=0;!b;){0!=this._repeatLimit&&++this._repeatTime>=this._repeatLimit&&(this._repeatTime=0,this.reset(!1));0!=this._changeLimit&&++this._changeTime>=this._changeLimit&&(this._changeLimit=0,this._period*=this._changeAmount);this._slide+=this._deltaSlide;this._period*=this._slide;this._period>this._maxPeriod&&(this._period=this._maxPeriod,0<this._minFreqency&&
(b=!0));var c=this._period;0<this._vibratoAmplitude&&(this._vibratoPhase+=this._vibratoSpeed,c=this._period*(1+Math.sin(this._vibratoPhase)*this._vibratoAmplitude));c|=0;8>c&&(c=8);0==this._waveType&&(this._squareDuty+=this._dutySweep,0>this._squareDuty?this._squareDuty=0:0.5<this._squareDuty&&(this._squareDuty=0.5));if(++this._envelopeTime>this._envelopeLength)switch(this._envelopeTime=0,++this._envelopeStage){case 1:this._envelopeLength=this._envelopeLength1;break;case 2:this._envelopeLength=this._envelopeLength2}switch(this._envelopeStage){case 0:this._envelopeVolume=
this._envelopeTime/this._envelopeLength0;break;case 1:this._envelopeVolume=1+2*(1-this._envelopeTime/this._envelopeLength1)*this._sustainPunch;break;case 2:this._envelopeVolume=1-this._envelopeTime/this._envelopeLength2;break;case 3:this._envelopeVolume=0,b=!0}this._phaser&&(this._phaserOffset+=this._phaserDeltaOffset,this._phaserInt=this._phaserOffset|0,0>this._phaserInt?this._phaserInt=-this._phaserInt:1023<this._phaserInt&&(this._phaserInt=1023));this._filters&&0!=this._hpFilterDeltaCutoff&&(this._hpFilterCutoff*=
this._hpFilterDeltaCutoff,1.0E-5>this._hpFilterCutoff?this._hpFilterCutoff=1.0E-5:0.1<this._hpFilterCutoff&&(this._hpFilterCutoff=0.1));for(var d=this._superSample=0;8>d;){d++;var e=0;this._phase++;if(this._phase>=c&&(this._phase-=c|0,3==this._waveType))for(var f=0;32>f;)this._noiseBuffer[f++]=2*Math.random()-1;switch(this._waveType){case 0:e=this._phase/c<this._squareDuty?0.5:-0.5;break;case 1:e=1-2*(this._phase/c);break;case 2:this._pos=this._phase/c;this._pos=0.5<this._pos?6.28318531*(this._pos-
1):6.28318531*this._pos;e=0>this._pos?1.27323954*this._pos+0.405284735*this._pos*this._pos:1.27323954*this._pos-0.405284735*this._pos*this._pos;e=0>e?0.225*(e*-e-e)+e:0.225*(e*e-e)+e;break;case 3:e=this._noiseBuffer[32*this._phase/(c|0)|0]}this._filters&&(this._lpFilterOldPos=this._lpFilterPos,this._lpFilterCutoff*=this._lpFilterDeltaCutoff,0>this._lpFilterCutoff?this._lpFilterCutoff=0:0.1<this._lpFilterCutoff&&(this._lpFilterCutoff=0.1),this._lpFilterOn?(this._lpFilterDeltaPos+=(e-this._lpFilterPos)*
this._lpFilterCutoff,this._lpFilterDeltaPos*=this._lpFilterDamping):(this._lpFilterPos=e,this._lpFilterDeltaPos=0),this._lpFilterPos+=this._lpFilterDeltaPos,this._hpFilterPos+=this._lpFilterPos-this._lpFilterOldPos,e=this._hpFilterPos*=1-this._hpFilterCutoff);this._phaser&&(this._phaserBuffer[this._phaserPos&1023]=e,e+=this._phaserBuffer[this._phaserPos-this._phaserInt+1024&1023],this._phaserPos=this._phaserPos+1&1023);this._superSample+=e}this._superSample=this._masterVolume*this._envelopeVolume*
this._superSample/8;1<this._superSample?this._superSample=1:-1>this._superSample&&(this._superSample=-1);c=32767*this._superSample|0;a.push(c&255);a.push(c>>8&255)}},makePlayer:function(a){var b=new ArrayBuffer(44+a.length),c=new Uint8Array(b),d=0,e=function(a){for(var b=0,e=a.length;b<e;){var f=b++;c[d++]=a.charCodeAt(f)}},f=function(a){c[d++]=a&255;c[d++]=a>>8&255},g=function(a){c[d++]=a&255;c[d++]=a>>8&255;c[d++]=a>>16&255;c[d++]=a>>24&255};e("RIFF");g(0);e("WAVE");e("fmt ");g(16);f(1);f(1);g(44100);
g(88200);f(2);f(16);e("data");g(a.length);c.set(a,d);var h=null,j=!1;if(null==T.html5AudioContext){a=window.webkitAudioContext||window.audioContext||null;if(null==a)return function(){};T.html5AudioContext=new a}var l=function(){if(null==h)j=!0;else{var a=T.html5AudioContext.createBufferSource();a.buffer=h;a.connect(T.html5AudioContext.destination);a.loop=!1;a.start(0)}};T.html5AudioContext.decodeAudioData(b,function(a){h=a;j&&l()});return l},__class__:T};var fa=function(a){this.MAX_INT=2147483647;
this.lpFilterCutoffSweep=this.lpFilterResonance=this.hpFilterCutoff=this.hpFilterCutoffSweep=0;this.lpFilterCutoff=1;this.minFrequency=this.slide=this.deltaSlide=this.vibratoDepth=this.vibratoSpeed=this.changeAmount=this.changeSpeed=this.squareDuty=this.dutySweep=this.repeatSpeed=this.phaserOffset=this.phaserSweep=0;this.startFrequency=0.3;this.decayTime=0.4;this.sustainPunch=0;this.sustainTime=0.3;this.attackTime=0;this.masterVolume=0.5;this.waveType=0;this.seed(a)};fa.__name__=!0;fa.prototype={generatePickupCoin:function(){this.startFrequency=
0.4+0.5*this.random();this.sustainTime=0.1*this.random();this.decayTime=0.1+0.4*this.random();this.sustainPunch=0.3+0.3*this.random();0.5>this.random()&&(this.changeSpeed=0.5+0.2*this.random(),this.changeAmount=0.2+0.4*this.random())},generateExplosion:function(){this.waveType=3;0.5>this.random()?(this.startFrequency=0.1+0.4*this.random(),this.slide=-0.1+0.4*this.random()):(this.startFrequency=0.2+0.7*this.random(),this.slide=-0.2-0.2*this.random());this.startFrequency*=this.startFrequency;0.2>this.random()&&
(this.slide=0);0.33>this.random()&&(this.repeatSpeed=0.3+0.5*this.random());this.sustainTime=0.1+0.3*this.random();this.decayTime=0.5*this.random();this.sustainPunch=0.2+0.6*this.random();0.5>this.random()&&(this.phaserOffset=-0.3+0.9*this.random(),this.phaserSweep=0.3*-this.random());0.33>this.random()&&(this.changeSpeed=0.6+0.3*this.random(),this.changeAmount=0.8-1.6*this.random())},generatePowerup:function(){0.5>this.random()?this.waveType=1:this.squareDuty=0.6*this.random();0.5>this.random()?
(this.startFrequency=0.2+0.3*this.random(),this.slide=0.1+0.4*this.random(),this.repeatSpeed=0.4+0.4*this.random()):(this.startFrequency=0.2+0.3*this.random(),this.slide=0.05+0.2*this.random(),0.5>this.random()&&(this.vibratoDepth=0.7*this.random(),this.vibratoSpeed=0.6*this.random()));this.sustainTime=0.4*this.random();this.decayTime=0.1+0.4*this.random()},generateHitHurt:function(){this.waveType=z["int"](3*this.random());2==this.waveType?this.waveType=3:0==this.waveType&&(this.squareDuty=0.6*this.random());
this.startFrequency=0.2+0.6*this.random();this.slide=-0.3-0.4*this.random();this.sustainTime=0.1*this.random();this.decayTime=0.1+0.2*this.random();0.5>this.random()&&(this.hpFilterCutoff=0.3*this.random())},generateJump:function(){this.waveType=0;this.squareDuty=0.6*this.random();this.startFrequency=0.3+0.3*this.random();this.slide=0.1+0.2*this.random();this.sustainTime=0.1+0.3*this.random();this.decayTime=0.1+0.2*this.random();0.5>this.random()&&(this.hpFilterCutoff=0.3*this.random());0.5>this.random()&&
(this.lpFilterCutoff=1-0.6*this.random())},generateBlipSelect:function(){this.waveType=z["int"](2*this.random());0==this.waveType&&(this.squareDuty=0.6*this.random());this.startFrequency=0.2+0.4*this.random();this.sustainTime=0.1+0.1*this.random();this.decayTime=0.2*this.random();this.hpFilterCutoff=0.1},mutate:function(a){null==a&&(a=0.05);0.5>this.random()&&(this.startFrequency+=2*this.random()*a-a);0.5>this.random()&&(this.minFrequency+=2*this.random()*a-a);0.5>this.random()&&(this.slide+=2*this.random()*
a-a);0.5>this.random()&&(this.deltaSlide+=2*this.random()*a-a);0.5>this.random()&&(this.squareDuty+=2*this.random()*a-a);0.5>this.random()&&(this.dutySweep+=2*this.random()*a-a);0.5>this.random()&&(this.vibratoDepth+=2*this.random()*a-a);0.5>this.random()&&(this.vibratoSpeed+=2*this.random()*a-a);0.5>this.random()&&(this.attackTime+=2*this.random()*a-a);0.5>this.random()&&(this.sustainTime+=2*this.random()*a-a);0.5>this.random()&&(this.decayTime+=2*this.random()*a-a);0.5>this.random()&&(this.sustainPunch+=
2*this.random()*a-a);0.5>this.random()&&(this.lpFilterCutoff+=2*this.random()*a-a);0.5>this.random()&&(this.lpFilterCutoffSweep+=2*this.random()*a-a);0.5>this.random()&&(this.lpFilterResonance+=2*this.random()*a-a);0.5>this.random()&&(this.hpFilterCutoff+=2*this.random()*a-a);0.5>this.random()&&(this.hpFilterCutoffSweep+=2*this.random()*a-a);0.5>this.random()&&(this.phaserOffset+=2*this.random()*a-a);0.5>this.random()&&(this.phaserSweep+=2*this.random()*a-a);0.5>this.random()&&(this.repeatSpeed+=
2*this.random()*a-a);0.5>this.random()&&(this.changeSpeed+=2*this.random()*a-a);0.5>this.random()&&(this.changeAmount+=2*this.random()*a-a)},seed:function(a){this._randomstate=null!=a?a:Math.floor(Math.random()*this.MAX_INT)},randint:function(){return this._randomstate=(1103515245*this._randomstate+12345)%this.MAX_INT},random:function(){return this.randint()/this.MAX_INT},__class__:fa};var sc=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;
Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var tc={__name__:["Int"]},uc={__name__:["Dynamic"]},qc=Number;qc.__name__=["Float"];var rc=Boolean;rc.__ename__=["Bool"];var vc={__name__:["Class"]},wc={};n.Element="element";n.PCData="pcdata";n.CData="cdata";n.Comment="comment";n.DocType="doctype";n.ProcessingInstruction="processingInstruction";
n.Document="document";ha.instance=new ha;C.DISPATCHING_SENTINEL=new xa(null,null);m.root=new x;m.uncaughtError=new A;m.hidden=new E(!1);m.volume=new l(1);m._platform=ha.instance;m._calledInit=!1;F.__meta__={obj:{assets:[{bootstrap:[{bytes:236,md5:"0531ff7e710dfe83cf2a403d60cd0029",name:"progress/Background.png"},{bytes:233,md5:"0f7932bfef9dc00317b5f065a6fd9ee2",name:"progress/Fill.png"},{bytes:1802,md5:"38483ec805d762b46f98d860a07d8486",name:"progress/Left.png"},{bytes:1812,md5:"ef81e68e66258c3d52b80674c6626bf9",
name:"progress/Right.png"}],locale:[{bytes:671,md5:"eb2ee507825770e975abe3184d4370e3",name:"messages.ini"}],main:[{bytes:4427,md5:"145aeed568d44d8610fc81a14a4dc5fa",name:"backgrounds/background.png"},{bytes:10023,md5:"8e8e4ad838d1be7108dbc21266a3c1a7",name:"buttons/play.png"},{bytes:248524,md5:"84679cd7028d81b645a3787cbcf570dc",name:"buttons/play.pxm"},{bytes:17379,md5:"f10f43eaf59d3c94722ac41913ea25fb",name:"cursors/cursor.png"},{bytes:192356,md5:"fb27f2e7410f7bc3a3bf6352dc5b1cc2",name:"cursors/cursor.pxm"},
{bytes:16389,md5:"e7017482f5b5283a37438bb6ff320804",name:"fonts/arial_black_15_blue.fnt"},{bytes:20194,md5:"c952b30fb571c1e0d0b8295260b48745",name:"fonts/arial_black_15_blue.png"},{bytes:20343,md5:"ed17f2ec8f82db984282ce9de010ea40",name:"fonts/handel.fnt"},{bytes:19845,md5:"85dbc080752469baf78cb5f23a0498c4",name:"fonts/handel.png"},{bytes:21146,md5:"fb38026108207095328515670e6ebca5",name:"fonts/testfont.fnt"},{bytes:16859,md5:"5cf7af9e72bc627d5f06e900647da029",name:"fonts/testfont.png"},{bytes:40,
md5:"89d9bd80e584ad10c025a13749ecdc7c",name:"levels/level1.lvl"},{bytes:40,md5:"2fe02dc70ace3b0cf1f420dd947e624a",name:"levels/level2.lvl"},{bytes:43,md5:"993bb2436d7fd8612bf4d35ae2aa4fb7",name:"levels/level3.lvl"},{bytes:40,md5:"09ba7ce34a752c588e69f00154407508",name:"levels/level4.lvl"},{bytes:40,md5:"c9a91d8a1d4cfd892dec58d3b96d0945",name:"levels/level5.lvl"},{bytes:40,md5:"c10b57a9c5625b596d66989b71d67f80",name:"levels/level6.lvl"},{bytes:40,md5:"aa61691d44c82d3d6915ea1338da496e",name:"levels/level7.lvl"},
{bytes:1344992,md5:"118724e0d5a13bd8313ea5ba127df499",name:"music/main.mp3"},{bytes:1688190,md5:"65c64b02ef0425681390a2965ac8f22b",name:"music/main.ogg"},{bytes:1993,md5:"25fa57d40cbbf5b1d651a960f7fe4b3b",name:"particles/explode.pex"},{bytes:3708,md5:"f1e607dbc4cf9311f145e368f1194a2a",name:"particles/particle.png"},{bytes:88447,md5:"5654c740be5b67f15b4e73c20edbef9c",name:"particles/particle.pxm"},{bytes:9559,md5:"77defe41c9c94845cf762f099b99461a",name:"player/player.png"},{bytes:286892,md5:"adc4885c6f610137677cc7027518b4f6",
name:"player/player.pxm"},{bytes:4626,md5:"3a6eda881dd2ead3146c205a3ea8a796",name:"tiles/bend.png"},{bytes:457301,md5:"24bce3878ca65384d5cd8711c23d9125",name:"tiles/bend.pxm"},{bytes:4905,md5:"7ae7f0ecfe9890b2d42288d6f28e3b56",name:"tiles/block.png"},{bytes:294413,md5:"bfcbbf617bb64ae557caee5274686ca7",name:"tiles/block.pxm"},{bytes:4097,md5:"37a20c6e71363a0aecf3801c1761ae13",name:"tiles/empty.png"},{bytes:93155,md5:"ec2ceda8da2f36a88f0aebb5f7452cff",name:"tiles/empty.pxm"},{bytes:6448,md5:"8c58b81e008d6518029ca1798642bd5f",
name:"tiles/goal.png"},{bytes:779134,md5:"abdb132737df944c37fdb69855650f7c",name:"tiles/goal.pxm"},{bytes:38285,md5:"44b439731f8dc86c7b49f354293c48e6",name:"tiles/grass.png"},{bytes:387998,md5:"f65075728d4ca38a1153f0ad3d115414",name:"tiles/grass.pxm"},{bytes:4506,md5:"d7b4ca9fe82121203320621b7945c861",name:"tiles/selection.png"},{bytes:167676,md5:"30823a390a49ec0f551feb5acbf37d7d",name:"tiles/selection.pxm"},{bytes:4478,md5:"82a25413b88c1a407c6ae3e844c6906e",name:"tiles/straight.png"},{bytes:349847,
md5:"5fdd852fdc2d73faa12d7b98175b585b",name:"tiles/straight.pxm"}]}]}};F._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();j._scratchPoint=new hb;Ba.NEWLINE=new ib(10);S._sharedEvent=new Qb;I._sharedEvent=new Rb;wa.CANVAS_TEXTURES=(new U("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);v._mediaRefCount=0;v._detectBlobSupport=!0;o.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];
o.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new U("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);w._detectSupport=!0;Z._scratchMatrix=new X;ga.escapes=function(){var a=new Q;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);O.TILE_SIZE=128;O.HEIGHT=5*O.TILE_SIZE;O.WIDTH=7*O.TILE_SIZE;nc.main()})();
